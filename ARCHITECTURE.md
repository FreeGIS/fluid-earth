# Architecture

The following is a description of the layout of source files for the fev2r web
application so that is possible to find the files in which future changes need
to be made.

## Browser entry point

The first file the browser encounters is `public/index.html`, a blank page with
links to styles and scripts that load the rest of the single-page app (SPA). The
webserver root is the `public/` directory, so a link to `/global.css` in
`public/index.html` refers to `public/global.css`.

While some of the links in `public/index.html` refer to static assets (such as
images), the links that start with `/build/` need to be compiled by the Rollup
bundler. Compilation is controlled by `rollup.config.js`.

## `src` directory

The `public/build/` styles and scripts are created from the Javascript and
Svelte files in `src`, with `src/main.js` as the starting point that imports the
rest of the files in the import tree.

Two Svelte components are particularly noteworthy: `src/App.svelte` and
`src/map/Map.svelte`. `App.svelte` defines all the reactive global variables and
their relationships. It also contains all the menus, overlays, and the map.
`Map.svelte` controls all the WebGL logic and displays the map (by default as a
globe) with the props as defined by `App.svelte`.

## `data` directory

The data and metadata needed to display information on the map is generated by
scripts in the `data` directory, which output this data and metadata to
`public/data/` and `public/data/inventory.json`, respectively.
