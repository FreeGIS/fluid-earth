/**
 * Includes code from some of the following libraries:
 * https://fev2r.netlify.app/legal/THIRD_PARTY
 */
!function(){"use strict";function t(){}function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function n(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a,l=!1;function s(t,e,o,r){for(;t<e;){const n=t+(e-t>>1);o(n)<=r?t=n+1:e=n}return t}function c(t,e){l?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,o=new Int32Array(e.length+1),r=new Int32Array(e.length);o[0]=-1;let n=0;for(let t=0;t<e.length;t++){const i=s(1,n+1,(t=>e[o[t]].claim_order),e[t].claim_order)-1;r[t]=o[i]+1;const a=i+1;o[a]=t,n=Math.max(a,n)}const i=[],a=[];let l=e.length-1;for(let t=o[n]+1;0!=t;t=r[t-1]){for(i.push(e[t-1]);l>=t;l--)a.push(e[l]);l--}for(;l>=0;l--)a.push(e[l]);i.reverse(),a.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,o=0;e<a.length;e++){for(;o<i.length&&a[e].claim_order>=i[o].claim_order;)o++;const r=o<i.length?i[o]:null;t.insertBefore(a[e],r)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function u(t,e,o){l&&!o?c(t,e):(e.parentNode!==t||o&&e.nextSibling!==o)&&t.insertBefore(e,o||null)}function f(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function h(){return t=" ",document.createTextNode(t);var t}function p(t,e,o){null==o?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function m(t){const e={};for(const o of t)e[o.name]=o.value;return e}function _(t){a=t}function y(t){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(t)}const g=[],x=[],v=[],L=[],b=Promise.resolve();let P=!1;function A(t){v.push(t)}let C=!1;const w=new Set;function F(){if(!C){C=!0;do{for(let t=0;t<g.length;t+=1){const e=g[t];_(e),E(e.$$)}for(_(null),g.length=0;x.length;)x.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];w.has(e)||(w.add(e),e())}v.length=0}while(g.length);for(;L.length;)L.pop()();P=!1,C=!1,w.clear()}}function E(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const S=new Set;function I(t,e){-1===t.$$.dirty[0]&&(g.push(t),P||(P=!0,b.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(i,s,c,u,d,h,p=[-1]){const m=a;_(i);const y=i.$$={fragment:null,ctx:null,props:h,update:t,not_equal:d,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:s.context||[]),callbacks:o(),dirty:p,skip_bound:!1};let g=!1;if(y.ctx=c?c(i,s.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return y.ctx&&d(y.ctx[t],y.ctx[t]=r)&&(!y.skip_bound&&y.bound[t]&&y.bound[t](r),g&&I(i,t)),e})):[],y.update(),g=!0,r(y.before_update),y.fragment=!!u&&u(y.ctx),s.target){if(s.hydrate){l=!0;const t=function(t){return Array.from(t.childNodes)}(s.target);y.fragment&&y.fragment.l(t),t.forEach(f)}else y.fragment&&y.fragment.c();s.intro&&((x=i.$$.fragment)&&x.i&&(S.delete(x),x.i(v))),function(t,o,i,a){const{fragment:l,on_mount:s,on_destroy:c,after_update:u}=t.$$;l&&l.m(o,i),a||A((()=>{const o=s.map(e).filter(n);c?c.push(...o):r(o),t.$$.on_mount=[]})),u.forEach(A)}(i,s.target,s.anchor,s.customElement),l=!1,F()}var x,v;_(m)}let T;"function"==typeof HTMLElement&&(T=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(n);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,o){this[t]=o}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){!function(t,e){const o=t.$$;null!==o.fragment&&(r(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const D=5120,R=5121,M=5122,j=5123,$=5124,B=5125,O=5126,k={};{const t=k;t[D]=Int8Array,t[5121]=Uint8Array,t[5122]=Int16Array,t[5123]=Uint16Array,t[$]=Int32Array,t[5125]=Uint32Array,t[5126]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function N(t){if(t instanceof Int8Array)return D;if(t instanceof Uint8Array)return R;if(t instanceof Uint8ClampedArray)return R;if(t instanceof Int16Array)return M;if(t instanceof Uint16Array)return j;if(t instanceof Int32Array)return $;if(t instanceof Uint32Array)return B;if(t instanceof Float32Array)return O;throw new Error("unsupported typed array type")}const U="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function H(...t){console.error(...t)}function G(t,e){return"undefined"!=typeof WebGLRenderbuffer&&e instanceof WebGLRenderbuffer}function W(t,e){return"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture}const V=34962,q="";function X(t,e,o,r){if(n=e,"undefined"!=typeof WebGLBuffer&&n instanceof WebGLBuffer)return e;var n;o=o||V;const i=t.createBuffer();return function(t,e,o,r,n){t.bindBuffer(e,o),t.bufferData(e,r,n||35044)}(t,o,i,e,r),i}function Y(t){return"indices"===t}const Z=/coord|texture/i,K=/color|colour/i;function Q(t,e){let o;if(o=Z.test(t)?2:K.test(t)?4:3,e%o>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${o} but ${e} values is not evenly divisible by ${o}. You should specify it.`);return o}function J(t,e){if(U(t))return t;if(U(t.data))return t.data;Array.isArray(t)&&(t={data:t});let o=t.type;return o||(o=Y(e)?Uint16Array:Float32Array),new o(t.data)}function tt(t,e){const o={};return Object.keys(e).forEach((function(r){if(!Y(r)){const i=e[r],a=i.attrib||i.name||i.attribName||q+r;if(i.value){if(!Array.isArray(i.value)&&!U(i.value))throw new Error("array.value is not array or typedarray");o[a]={value:i.value}}else{let e,l,s,c;if(i.buffer&&i.buffer instanceof WebGLBuffer)e=i.buffer,c=i.numComponents||i.size,l=i.type,s=i.normalize;else if("number"==typeof i||"number"==typeof i.data){const o=i.data||i,a=i.type||Float32Array,u=o*a.BYTES_PER_ELEMENT;l=function(t){if(t===Int8Array)return D;if(t===Uint8Array)return R;if(t===Uint8ClampedArray)return R;if(t===Int16Array)return M;if(t===Uint16Array)return j;if(t===Int32Array)return $;if(t===Uint32Array)return B;if(t===Float32Array)return O;throw new Error("unsupported typed array type")}(a),s=void 0!==i.normalize?i.normalize:(n=a)===Int8Array||n===Uint8Array,c=i.numComponents||i.size||Q(r,o),e=t.createBuffer(),t.bindBuffer(V,e),t.bufferData(V,u,i.drawType||35044)}else{const o=J(i,r);e=X(t,o,void 0,i.drawType),l=N(o),s=void 0!==i.normalize?i.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(o),c=function(t,e){return t.numComponents||t.size||Q(e,function(t){return t.length?t:t.data}(t).length)}(i,r)}o[a]={buffer:e,numComponents:c,type:l,normalize:s,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var n})),t.bindBuffer(V,null),o}const et=["position","positions","a_position"];function ot(t,e,o){const r=tt(t,e),n=Object.assign({},o||{});n.attribs=Object.assign({},o?o.attribs:{},r);const i=e.indices;if(i){const e=J(i,"indices");n.indices=X(t,e,34963),n.numElements=e.length,n.elementType=N(e)}else n.numElements||(n.numElements=function(t,e){let o,r;for(r=0;r<et.length&&(o=et[r],!(o in e))&&(o=q+o,!(o in e));++r);r===et.length&&(o=Object.keys(e)[0]);const n=e[o];t.bindBuffer(V,n.buffer);const i=t.getBufferParameter(V,34660);var a;t.bindBuffer(V,null);const l=i/(5120===(a=n.type)||5121===a?1:5122===a||5123===a?2:5124===a||5125===a||5126===a?4:0),s=n.numComponents||n.size,c=l/s;if(c%1!=0)throw new Error(`numComponents ${s} not correct for length ${length}`);return c}(t,n.attribs));return n}function rt(t){return!!t.texStorage2D}const nt=function(){const t={},e={};return function(o,r){return function(o){const r=o.constructor.name;if(!t[r]){for(const t in o)if("number"==typeof o[t]){const r=e[o[t]];e[o[t]]=r?`${r} | ${t}`:t}t[r]=!0}}(o),e[r]||("number"==typeof r?`0x${r.toString(16)}`:r)}}(),it={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},at=U,lt=function(){let t;return function(){return t=t||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),t}}(),st=6407,ct=6408,ut=6402,ft=33071,dt=3553,ht=34067,pt=32879,mt=35866,_t=34069,yt=10241,gt=10240,xt=10242,vt=10243,Lt=3317,bt=5120,Pt=5121,At=5122,Ct=5123,wt=5124,Ft=5125,Et=5126,St=5131,It=36193,zt=33640,Tt=33319,Dt=33320,Rt=6403,Mt=36244,jt=36248,$t=36249;let Bt;function Ot(t){if(!Bt){const t={};t[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Pt,St,It,Et]},t[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Pt,St,It,Et]},t[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Pt,St,It,Et]},t[st]={textureFormat:st,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Pt,St,It,Et,33635]},t[ct]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Pt,St,It,Et,32819,32820]},t[6402]={textureFormat:ut,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ft,Ct]},t[33321]={textureFormat:Rt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Pt]},t[36756]={textureFormat:Rt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[bt]},t[33325]={textureFormat:Rt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Et,St]},t[33326]={textureFormat:Rt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Et]},t[33330]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Pt]},t[33329]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[bt]},t[33332]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ct]},t[33331]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[At]},t[33334]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ft]},t[33333]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[wt]},t[33323]={textureFormat:Tt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Pt]},t[36757]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[bt]},t[33327]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Et,St]},t[33328]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Et]},t[33336]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Pt]},t[33335]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[bt]},t[33338]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ct]},t[33337]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[At]},t[33340]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ft]},t[33339]={textureFormat:Dt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[wt]},t[32849]={textureFormat:st,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Pt]},t[35905]={textureFormat:st,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Pt]},t[36194]={textureFormat:st,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Pt,33635]},t[36758]={textureFormat:st,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[bt]},t[35898]={textureFormat:st,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Et,St,35899]},t[35901]={textureFormat:st,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Et,St,35902]},t[34843]={textureFormat:st,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Et,St]},t[34837]={textureFormat:st,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Et]},t[36221]={textureFormat:jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Pt]},t[36239]={textureFormat:jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[bt]},t[36215]={textureFormat:jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ct]},t[36233]={textureFormat:jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[At]},t[36209]={textureFormat:jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ft]},t[36227]={textureFormat:jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[wt]},t[32856]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Pt]},t[35907]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Pt]},t[36759]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[bt]},t[32855]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Pt,32820,zt]},t[32854]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Pt,32819]},t[32857]={textureFormat:ct,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[zt]},t[34842]={textureFormat:ct,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Et,St]},t[34836]={textureFormat:ct,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Et]},t[36220]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Pt]},t[36238]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[bt]},t[36975]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[zt]},t[36214]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ct]},t[36232]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[At]},t[36226]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[wt]},t[36208]={textureFormat:$t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ft]},t[33189]={textureFormat:ut,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ct,Ft]},t[33190]={textureFormat:ut,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ft]},t[36012]={textureFormat:ut,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Et]},t[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},t[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(t).forEach((function(e){const o=t[e];o.bytesPerElementMap={},o.bytesPerElement.forEach((function(t,e){const r=o.type[e];o.bytesPerElementMap[r]=t}))})),Bt=t}return Bt[t]}function kt(t){const e=Ot(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function Nt(t){return 0==(t&t-1)}function Ut(t,e,o){return at(e)?N(e):o||Pt}function Ht(t,e,o,r,n){if(n%1!=0)throw"can't guess dimensions";if(o||r){if(r){if(!o&&(o=n/r)%1)throw"can't guess dimensions"}else if((r=n/o)%1)throw"can't guess dimensions"}else{const t=Math.sqrt(n/(e===ht?6:1));t%1==0?(o=t,r=t):(o=n,r=1)}return{width:o,height:r}}function Gt(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(37443,e.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(37441,e.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(37440,e.flipY)}function Wt(t){t.pixelStorei(Lt,4),rt(t)&&(t.pixelStorei(3314,0),t.pixelStorei(32878,0),t.pixelStorei(3316,0),t.pixelStorei(3315,0),t.pixelStorei(32877,0))}function Vt(t,e,o,r){var n;r.minMag&&(o.call(t,e,yt,r.minMag),o.call(t,e,gt,r.minMag)),r.min&&o.call(t,e,yt,r.min),r.mag&&o.call(t,e,gt,r.mag),r.wrap&&(o.call(t,e,xt,r.wrap),o.call(t,e,vt,r.wrap),(e===pt||(n=e,"undefined"!=typeof WebGLSampler&&n instanceof WebGLSampler))&&o.call(t,e,32882,r.wrap)),r.wrapR&&o.call(t,e,32882,r.wrapR),r.wrapS&&o.call(t,e,xt,r.wrapS),r.wrapT&&o.call(t,e,vt,r.wrapT),r.minLod&&o.call(t,e,33082,r.minLod),r.maxLod&&o.call(t,e,33083,r.maxLod),r.baseLevel&&o.call(t,e,33084,r.baseLevel),r.maxLevel&&o.call(t,e,33085,r.maxLevel)}function qt(t,e,o){const r=o.target||dt;t.bindTexture(r,e),Vt(t,r,t.texParameteri,o)}function Xt(t,e,o,r,n,i){i=i||ct;const a=(o=o||it.textureOptions).target||dt;if(r=r||o.width,n=n||o.height,t.bindTexture(a,e),function(t,e,o,r){if(!rt(t))return Nt(e)&&Nt(o);const n=Ot(r);if(!n)throw"unknown internal format";return n.colorRenderable&&n.textureFilterable}(t,r,n,i))t.generateMipmap(a);else{const e=function(t){const e=Ot(t);if(!e)throw"unknown internal format";return e.textureFilterable}(i)?9729:9728;t.texParameteri(a,yt,e),t.texParameteri(a,gt,e),t.texParameteri(a,xt,ft),t.texParameteri(a,vt,ft)}}function Yt(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function Zt(t,e){return(e=e||{}).cubeFaceOrder||[_t,34070,34071,34072,34073,34074]}function Kt(t,e){const o=Zt(0,e).map((function(t,e){return{face:t,ndx:e}}));return o.sort((function(t,e){return t.face-e.face})),o}function Qt(t,e,o,r){const n=(r=r||it.textureOptions).target||dt,i=r.level||0;let a=o.width,l=o.height;const s=r.internalFormat||r.format||ct,c=kt(s),u=r.format||c.format,f=r.type||c.type;if(Gt(t,r),t.bindTexture(n,e),n===ht){const c=o.width,d=o.height;let h,p;if(c/6===d)h=d,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===c)h=c,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==d/2)h=c/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=d/3)throw"can't figure out cube map from element: "+(o.src?o.src:o.nodeName);h=c/2,p=[0,0,1,0,0,1,1,1,0,2,1,2]}const m=lt();m?(m.canvas.width=h,m.canvas.height=h,a=h,l=h,Kt(0,r).forEach((function(e){const r=p[2*e.ndx+0]*h,n=p[2*e.ndx+1]*h;m.drawImage(o,r,n,h,h,0,0,h,h),t.texImage2D(e.face,i,s,u,f,m.canvas)})),m.canvas.width=1,m.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=h,l=h,Kt(0,r).forEach((function(c){const d=p[2*c.ndx+0]*h,m=p[2*c.ndx+1]*h;t.texImage2D(c.face,i,s,h,h,0,u,f,null),createImageBitmap(o,d,m,h,h,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(o){Gt(t,r),t.bindTexture(n,e),t.texImage2D(c.face,i,s,u,f,o),Yt(r)&&Xt(t,e,r,a,l,s)}))})))}else if(n===pt||n===mt){const e=Math.min(o.width,o.height),r=Math.max(o.width,o.height),a=r/e;if(a%1!=0)throw"can not compute 3D dimensions of element";const l=o.width===r?1:0,c=o.height===r?1:0;t.pixelStorei(Lt,1),t.pixelStorei(3314,o.width),t.pixelStorei(32878,0),t.pixelStorei(32877,0),t.texImage3D(n,i,s,e,e,e,0,u,f,null);for(let r=0;r<a;++r){const a=r*e*l,s=r*e*c;t.pixelStorei(3316,a),t.pixelStorei(3315,s),t.texSubImage3D(n,i,0,0,r,e,e,1,u,f,o)}Wt(t)}else t.texImage2D(n,i,s,u,f,o);Yt(r)&&Xt(t,e,r,a,l,s),qt(t,e,r)}function Jt(){}function te(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}(t)?e:"anonymous"}function ee(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function oe(t,e,o){return ee(t)?(setTimeout((function(){o(null,t)})),t):function(t,e,o){let r;if(o=o||Jt,e=te(t,e=void 0!==e?e:it.crossOrigin),"undefined"!=typeof Image){r=new Image,void 0!==e&&(r.crossOrigin=e);const n=function(){r.removeEventListener("error",i),r.removeEventListener("load",a),r=null},i=function(){const e="couldn't load image: "+t;H(e),o(e,r),n()},a=function(){o(null,r),n()};return r.addEventListener("error",i),r.addEventListener("load",a),r.src=t,r}if("undefined"!=typeof ImageBitmap){let n,i;const a=function(){o(n,i)},l={};e&&(l.mode="cors"),fetch(t,l).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){i=t,setTimeout(a)})).catch((function(t){n=t,setTimeout(a)})),r=null}return r}(t,e,o)}function re(t,e,o){const r=(o=o||it.textureOptions).target||dt;if(t.bindTexture(r,e),!1===o.color)return;const n=function(t){return at(t=t||it.textureColor)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(o.color);if(r===ht)for(let e=0;e<6;++e)t.texImage2D(_t+e,0,ct,1,1,0,ct,Pt,n);else r===pt||r===mt?t.texImage3D(r,0,ct,1,1,1,0,ct,Pt,n):t.texImage2D(r,0,ct,1,1,0,ct,Pt,n)}function ne(t,e,o,r){r=r||Jt;const n=o.src;if(6!==n.length)throw"there must be 6 urls for a cubemap";const i=o.level||0,a=o.internalFormat||o.format||ct,l=kt(a),s=o.format||l.format,c=o.type||Pt,u=o.target||dt;if(u!==ht)throw"target must be TEXTURE_CUBE_MAP";re(t,e,o),o=Object.assign({},o);let f=6;const d=[],h=Zt(0,o);let p;p=n.map((function(n,l){return oe(n,o.crossOrigin,(m=h[l],function(n,l){--f,n?d.push(n):l.width!==l.height?d.push("cubemap face img is not a square: "+l.src):(Gt(t,o),t.bindTexture(u,e),5===f?Zt().forEach((function(e){t.texImage2D(e,i,a,s,c,l)})):t.texImage2D(m,i,a,s,c,l),Yt(o)&&t.generateMipmap(u)),0===f&&r(d.length?d:void 0,e,p)}));var m}))}function ie(t,e,o,r){r=r||Jt;const n=o.src,i=o.internalFormat||o.format||ct,a=kt(i),l=o.format||a.format,s=o.type||Pt,c=o.target||mt;if(c!==pt&&c!==mt)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";re(t,e,o),o=Object.assign({},o);let u=n.length;const f=[];let d;const h=o.level||0;let p=o.width,m=o.height;const _=n.length;let y=!0;d=n.map((function(n,a){return oe(n,o.crossOrigin,(g=a,function(n,a){if(--u,n)f.push(n);else{if(Gt(t,o),t.bindTexture(c,e),y){y=!1,p=o.width||a.width,m=o.height||a.height,t.texImage3D(c,h,i,p,m,_,0,l,s,null);for(let e=0;e<_;++e)t.texSubImage3D(c,h,0,0,e,p,m,1,l,s,a)}else{let e,o=a;a.width===p&&a.height===m||(e=lt(),o=e.canvas,e.canvas.width=p,e.canvas.height=m,e.drawImage(a,0,0,p,m)),t.texSubImage3D(c,h,0,0,g,p,m,1,l,s,o),e&&o===e.canvas&&(e.canvas.width=0,e.canvas.height=0)}Yt(o)&&t.generateMipmap(c)}0===u&&r(f.length?f:void 0,e,d)}));var g}))}function ae(t,e,o,r){const n=(r=r||it.textureOptions).target||dt;t.bindTexture(n,e);let i=r.width,a=r.height,l=r.depth;const s=r.level||0,c=r.internalFormat||r.format||ct,u=kt(c),f=r.format||u.format,d=r.type||Ut(0,o,u.type);if(at(o))o instanceof Uint8ClampedArray&&(o=new Uint8Array(o.buffer));else{const t=function(t){const e=k[t];if(!e)throw new Error("unknown gl type");return e}(d);o=new t(o)}const h=function(t,e){const o=Ot(t);if(!o)throw"unknown internal format";const r=o.bytesPerElementMap[e];if(void 0===r)throw"unknown internal format";return r}(c,d),p=o.byteLength/h;if(p%1)throw"length wrong size for format: "+nt(t,f);let m;if(n===pt||n===mt)if(i||a||l)!i||a&&l?!a||i&&l?(m=Ht(0,n,i,a,p/l),i=m.width,a=m.height):(m=Ht(0,n,i,l,p/a),i=m.width,l=m.height):(m=Ht(0,n,a,l,p/i),a=m.width,l=m.height);else{const t=Math.cbrt(p);if(t%1!=0)throw"can't guess cube size of array of numElements: "+p;i=t,a=t,l=t}else m=Ht(0,n,i,a,p),i=m.width,a=m.height;if(Wt(t),t.pixelStorei(Lt,r.unpackAlignment||1),Gt(t,r),n===ht){const e=p/6*(h/o.BYTES_PER_ELEMENT);Kt(0,r).forEach((r=>{const n=e*r.ndx,l=o.subarray(n,n+e);t.texImage2D(r.face,s,c,i,a,0,f,d,l)}))}else n===pt||n===mt?t.texImage3D(n,s,c,i,a,l,0,f,d,o):t.texImage2D(n,s,c,i,a,0,f,d,o);return{width:i,height:a,depth:l,type:d}}function le(t,e,o){o=o||Jt,e=e||it.textureOptions;const r=t.createTexture(),n=e.target||dt;let i=e.width||1,a=e.height||1;const l=e.internalFormat||ct;t.bindTexture(n,r),n===ht&&(t.texParameteri(n,xt,ft),t.texParameteri(n,vt,ft));let s=e.src;if(s)if("function"==typeof s&&(s=s(t,e)),"string"==typeof s)!function(t,e,o,r){r=r||Jt,re(t,e,o=o||it.textureOptions),oe((o=Object.assign({},o)).src,o.crossOrigin,(function(n,i){n?r(n,e,i):(Qt(t,e,i,o),r(null,e,i))}))}(t,r,e,o);else if(at(s)||Array.isArray(s)&&("number"==typeof s[0]||Array.isArray(s[0])||at(s[0]))){const o=ae(t,r,s,e);i=o.width,a=o.height}else Array.isArray(s)&&("string"==typeof s[0]||ee(s[0]))?n===ht?ne(t,r,e,o):ie(t,r,e,o):(Qt(t,r,s,e),i=s.width,a=s.height);else!function(t,e,o){const r=o.target||dt;t.bindTexture(r,e);const n=o.level||0,i=o.internalFormat||o.format||ct,a=kt(i),l=o.format||a.format,s=o.type||a.type;if(Gt(t,o),r===ht)for(let e=0;e<6;++e)t.texImage2D(_t+e,n,i,o.width,o.height,0,l,s,null);else r===pt||r===mt?t.texImage3D(r,n,i,o.width,o.height,o.depth,0,l,s,null):t.texImage2D(r,n,i,o.width,o.height,0,l,s,null)}(t,r,e);return Yt(e)&&Xt(t,r,e,i,a,l),qt(t,r,e),r}const se=H;function ce(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const ue=33984,fe=34962,de=5126,he=5124,pe=5125,me=3553,_e=34067,ye=32879,ge=35866,xe={};function ve(t,e){return xe[e].bindPoint}function Le(t,e){return function(o){t.uniform1i(e,o)}}function be(t,e){return function(o){t.uniform1iv(e,o)}}function Pe(t,e){return function(o){t.uniform2iv(e,o)}}function Ae(t,e){return function(o){t.uniform3iv(e,o)}}function Ce(t,e){return function(o){t.uniform4iv(e,o)}}function we(t,e,o,r){const n=ve(0,e);return rt(t)?function(e){let i,a;W(0,e)?(i=e,a=null):(i=e.texture,a=e.sampler),t.uniform1i(r,o),t.activeTexture(ue+o),t.bindTexture(n,i),t.bindSampler(o,a)}:function(e){t.uniform1i(r,o),t.activeTexture(ue+o),t.bindTexture(n,e)}}function Fe(t,e,o,r,n){const i=ve(0,e),a=new Int32Array(n);for(let t=0;t<n;++t)a[t]=o+t;return rt(t)?function(e){t.uniform1iv(r,a),e.forEach((function(e,r){let n,l;t.activeTexture(ue+a[r]),W(0,e)?(n=e,l=null):(n=e.texture,l=e.sampler),t.bindSampler(o,l),t.bindTexture(i,n)}))}:function(e){t.uniform1iv(r,a),e.forEach((function(e,o){t.activeTexture(ue+a[o]),t.bindTexture(i,e)}))}}function Ee(t,e){return function(o){if(o.value)switch(t.disableVertexAttribArray(e),o.value.length){case 4:t.vertexAttrib4fv(e,o.value);break;case 3:t.vertexAttrib3fv(e,o.value);break;case 2:t.vertexAttrib2fv(e,o.value);break;case 1:t.vertexAttrib1fv(e,o.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(fe,o.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,o.numComponents||o.size,o.type||de,o.normalize||!1,o.stride||0,o.offset||0),void 0!==o.divisor&&t.vertexAttribDivisor(e,o.divisor)}}function Se(t,e){return function(o){if(o.value){if(t.disableVertexAttribArray(e),4!==o.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,o.value)}else t.bindBuffer(fe,o.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,o.numComponents||o.size,o.type||he,o.stride||0,o.offset||0),void 0!==o.divisor&&t.vertexAttribDivisor(e,o.divisor)}}function Ie(t,e){return function(o){if(o.value){if(t.disableVertexAttribArray(e),4!==o.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,o.value)}else t.bindBuffer(fe,o.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,o.numComponents||o.size,o.type||pe,o.stride||0,o.offset||0),void 0!==o.divisor&&t.vertexAttribDivisor(e,o.divisor)}}function ze(t,e,o){const r=o.size,n=o.count;return function(o){t.bindBuffer(fe,o.buffer);const i=o.size||o.numComponents||r,a=i/n,l=o.type||de,s=xe[l].size*i,c=o.normalize||!1,u=o.offset||0,f=s/n;for(let r=0;r<n;++r)t.enableVertexAttribArray(e+r),t.vertexAttribPointer(e+r,a,l,c,s,u+f*r),void 0!==o.divisor&&t.vertexAttribDivisor(e+r,o.divisor)}}xe[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(o){t.uniform1f(e,o)}},arraySetter:function(t,e){return function(o){t.uniform1fv(e,o)}}},xe[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(o){t.uniform2fv(e,o)}}},xe[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(o){t.uniform3fv(e,o)}}},xe[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(o){t.uniform4fv(e,o)}}},xe[5124]={Type:Int32Array,size:4,setter:Le,arraySetter:be},xe[35667]={Type:Int32Array,size:8,setter:Pe},xe[35668]={Type:Int32Array,size:12,setter:Ae},xe[35669]={Type:Int32Array,size:16,setter:Ce},xe[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(o){t.uniform1ui(e,o)}},arraySetter:function(t,e){return function(o){t.uniform1uiv(e,o)}}},xe[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(o){t.uniform2uiv(e,o)}}},xe[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(o){t.uniform3uiv(e,o)}}},xe[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(o){t.uniform4uiv(e,o)}}},xe[35670]={Type:Uint32Array,size:4,setter:Le,arraySetter:be},xe[35671]={Type:Uint32Array,size:8,setter:Pe},xe[35672]={Type:Uint32Array,size:12,setter:Ae},xe[35673]={Type:Uint32Array,size:16,setter:Ce},xe[35674]={Type:Float32Array,size:16,setter:function(t,e){return function(o){t.uniformMatrix2fv(e,!1,o)}}},xe[35675]={Type:Float32Array,size:36,setter:function(t,e){return function(o){t.uniformMatrix3fv(e,!1,o)}}},xe[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(o){t.uniformMatrix4fv(e,!1,o)}}},xe[35685]={Type:Float32Array,size:24,setter:function(t,e){return function(o){t.uniformMatrix2x3fv(e,!1,o)}}},xe[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(o){t.uniformMatrix2x4fv(e,!1,o)}}},xe[35687]={Type:Float32Array,size:24,setter:function(t,e){return function(o){t.uniformMatrix3x2fv(e,!1,o)}}},xe[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(o){t.uniformMatrix3x4fv(e,!1,o)}}},xe[35689]={Type:Float32Array,size:32,setter:function(t,e){return function(o){t.uniformMatrix4x2fv(e,!1,o)}}},xe[35690]={Type:Float32Array,size:48,setter:function(t,e){return function(o){t.uniformMatrix4x3fv(e,!1,o)}}},xe[35678]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:me},xe[35680]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:_e},xe[35679]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ye},xe[35682]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:me},xe[36289]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ge},xe[36292]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ge},xe[36293]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:_e},xe[36298]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:me},xe[36299]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ye},xe[36300]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:_e},xe[36303]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ge},xe[36306]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:me},xe[36307]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ye},xe[36308]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:_e},xe[36311]={Type:null,size:0,setter:we,arraySetter:Fe,bindPoint:ge};const Te={};Te[5126]={size:4,setter:Ee},Te[35664]={size:8,setter:Ee},Te[35665]={size:12,setter:Ee},Te[35666]={size:16,setter:Ee},Te[5124]={size:4,setter:Se},Te[35667]={size:8,setter:Se},Te[35668]={size:12,setter:Se},Te[35669]={size:16,setter:Se},Te[5125]={size:4,setter:Ie},Te[36294]={size:8,setter:Ie},Te[36295]={size:12,setter:Ie},Te[36296]={size:16,setter:Ie},Te[35670]={size:4,setter:Se},Te[35671]={size:8,setter:Se},Te[35672]={size:12,setter:Se},Te[35673]={size:16,setter:Se},Te[35674]={size:4,setter:ze,count:2},Te[35675]={size:9,setter:ze,count:3},Te[35676]={size:16,setter:ze,count:4};const De=/ERROR:\s*\d+:(\d+)/gi;function Re(t,e="",o=0){const r=[...e.matchAll(De)],n=new Map(r.map(((t,o)=>{const n=parseInt(t[1]),i=r[o+1],a=i?i.index:e.length;return[n-1,e.substring(t.index,a)]})));return t.split("\n").map(((t,e)=>{const r=n.get(e);return`${e+1+o}: ${t}${r?`\n\n^^^ ${r}`:""}`})).join("\n")}const Me=/^[ \t]*\n/;function je(t,e,o,r){const n=r||se,i=t.createShader(o);let a=0;Me.test(e)&&(a=1,e=e.replace(Me,"")),t.shaderSource(i,e),t.compileShader(i);if(!t.getShaderParameter(i,35713)){const r=t.getShaderInfoLog(i);return n(`${Re(e,r,a)}\nError compiling ${nt(t,o)}: ${r}`),t.deleteShader(i),null}return i}function $e(t,e,o){let r,n;if("function"==typeof e&&(o=e,e=void 0),"function"==typeof t)o=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;const e=t;o=e.errorCallback,t=e.attribLocations,r=e.transformFeedbackVaryings,n=e.transformFeedbackMode}const i={errorCallback:o||se,transformFeedbackVaryings:r,transformFeedbackMode:n};if(t){let o={};Array.isArray(t)?t.forEach((function(t,r){o[t]=e?e[r]:r})):o=t,i.attribLocations=o}return i}const Be=["VERTEX_SHADER","FRAGMENT_SHADER"];function Oe(t,e){e.forEach((function(e){t.deleteShader(e)}))}function ke(t,e,o,r,n){const i=$e(o,r,n),a=[];for(let o=0;o<e.length;++o){const r=je(t,e[o],t[Be[o]],i.errorCallback);if(!r)return null;a.push(r)}return function(t,e,o,r,n){const i=$e(o,r,n),a=[],l=[];for(let o=0;o<e.length;++o){let r=e[o];if("string"==typeof r){const e=ce(r),n=e?e.text:r;let a=t[Be[o]];e&&e.type&&(a=((s=e.type).indexOf("frag")>=0?35632:s.indexOf("vert")>=0?35633:void 0)||a),r=je(t,n,a,i.errorCallback),l.push(r)}"undefined"!=typeof WebGLShader&&r instanceof WebGLShader&&a.push(r)}var s;if(a.length!==e.length)return i.errorCallback("not enough shaders for program"),Oe(t,l),null;const c=t.createProgram();a.forEach((function(e){t.attachShader(c,e)})),i.attribLocations&&Object.keys(i.attribLocations).forEach((function(e){t.bindAttribLocation(c,i.attribLocations[e],e)}));let u=i.transformFeedbackVaryings;if(u&&(u.attribs&&(u=u.attribs),Array.isArray(u)||(u=Object.keys(u)),t.transformFeedbackVaryings(c,u,i.transformFeedbackMode||35981)),t.linkProgram(c),!t.getProgramParameter(c,35714)){const e=t.getProgramInfoLog(c);return i.errorCallback(`${a.map((e=>{const o=Re(t.getShaderSource(e),"",0),r=t.getShaderParameter(e,t.SHADER_TYPE);return`${nt(t,r)}\n${o}}`})).join("\n")}\nError in program linking: ${e}`),t.deleteProgram(c),Oe(t,l),null}return c}(t,a,i)}function Ne(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const Ue=function t(e,o){const r=e.uniformSetters||e,n=arguments.length;for(let e=1;e<n;++e){const o=arguments[e];if(Array.isArray(o)){const e=o.length;for(let n=0;n<e;++n)t(r,o[n])}else for(const t in o){const e=r[t];e&&e(o[t])}}};function He(t,e){const o={program:e,uniformSetters:function(t,e){let o=0;function r(e,r,n){const i=r.name.endsWith("[0]"),a=r.type,l=xe[a];if(!l)throw new Error(`unknown type: 0x${a.toString(16)}`);let s;if(l.bindPoint){const e=o;o+=r.size,s=i?l.arraySetter(t,a,e,n,r.size):l.setter(t,a,e,n,r.size)}else s=l.arraySetter&&i?l.arraySetter(t,n):l.setter(t,n);return s.location=n,s}const n={},i=t.getProgramParameter(e,35718);for(let o=0;o<i;++o){const i=t.getActiveUniform(e,o);if(Ne(i))continue;let a=i.name;a.endsWith("[0]")&&(a=a.substr(0,a.length-3));const l=t.getUniformLocation(e,i.name);l&&(n[a]=r(0,i,l))}return n}(t,e),attribSetters:function(t,e){const o={},r=t.getProgramParameter(e,35721);for(let n=0;n<r;++n){const r=t.getActiveAttrib(e,n);if(Ne(r))continue;const i=t.getAttribLocation(e,r.name),a=Te[r.type],l=a.setter(t,i,a);l.location=i,o[r.name]=l}return o}(t,e)};return rt(t)&&(o.uniformBlockSpec=function(t,e){const o=t.getProgramParameter(e,35718),r=[],n=[];for(let i=0;i<o;++i){n.push(i),r.push({});const o=t.getActiveUniform(e,i);if(Ne(o))break;r[i].name=o.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(o){const i=o[0],a=o[1];t.getActiveUniforms(e,n,t[i]).forEach((function(t,e){r[e][a]=t}))}));const i={},a=t.getProgramParameter(e,35382);for(let o=0;o<a;++o){const r=t.getActiveUniformBlockName(e,o),n={index:t.getUniformBlockIndex(e,r),usedByVertexShader:t.getActiveUniformBlockParameter(e,o,35396),usedByFragmentShader:t.getActiveUniformBlockParameter(e,o,35398),size:t.getActiveUniformBlockParameter(e,o,35392),uniformIndices:t.getActiveUniformBlockParameter(e,o,35395)};n.used=n.usedByVertexShader||n.usedByFragmentShader,i[r]=n}return{blockSpecs:i,uniformData:r}}(t,e),o.transformFeedbackInfo=function(t,e){const o={},r=t.getProgramParameter(e,35971);for(let n=0;n<r;++n){const r=t.getTransformFeedbackVarying(e,n);o[r.name]={index:n,type:r.type,size:r.size}}return o}(t,e)),o}function Ge(t,e,o,r,n){const i=$e(o,r,n);let a=!0;if(e=e.map((function(t){if(t.indexOf("\n")<0){const e=ce(t);e?t=e.text:(i.errorCallback("no element with id: "+t),a=!1)}return t})),!a)return null;const l=ke(t,e,i);return l?He(t,l):null}const We=36161,Ve=34041,qe=36096,Xe=33306,Ye=33071,Ze=9729,Ke=[{format:6408,type:5121,min:Ze,wrap:Ye},{format:Ve}],Qe={};Qe[34041]=Xe,Qe[6401]=36128,Qe[36168]=36128,Qe[6402]=qe,Qe[33189]=qe,Qe[33190]=qe,Qe[36012]=qe,Qe[35056]=Xe,Qe[36013]=Xe;const Je={};function to(t,e,o,r){const n=36160,i=t.createFramebuffer();t.bindFramebuffer(n,i),o=o||t.drawingBufferWidth,r=r||t.drawingBufferHeight;let a=0;const l={framebuffer:i,attachments:[],width:o,height:r};return(e=e||Ke).forEach((function(e){let i=e.attachment;const s=e.format;let c=e.attachmentPoint||function(t,e){return Qe[t]||Qe[e]}(s,e.internalFormat);if(c||(c=36064+a++),!i)if(function(t){return Je[t]}(s))i=t.createRenderbuffer(),t.bindRenderbuffer(We,i),t.renderbufferStorage(We,s,o,r);else{const n=Object.assign({},e);n.width=o,n.height=r,void 0===n.auto&&(n.auto=!1,n.min=n.min||n.minMag||Ze,n.mag=n.mag||n.minMag||Ze,n.wrapS=n.wrapS||n.wrap||Ye,n.wrapT=n.wrapT||n.wrap||Ye),i=le(t,n)}if(G(0,i))t.framebufferRenderbuffer(n,c,We,i);else{if(!W(0,i))throw new Error("unknown attachment type");void 0!==e.layer?t.framebufferTextureLayer(n,c,i,e.level||0,e.layer):t.framebufferTexture2D(n,c,e.target||3553,i,e.level||0)}l.attachments.push(i)})),l}function eo(t,e,o,r,n){r=r||t.drawingBufferWidth,n=n||t.drawingBufferHeight,e.width=r,e.height=n,(o=o||Ke).forEach((function(o,i){const a=e.attachments[i],l=o.format;if(G(0,a))t.bindRenderbuffer(We,a),t.renderbufferStorage(We,l,r,n);else{if(!W(0,a))throw new Error("unknown attachment type");!function(t,e,o,r,n,i){r=r||o.width,n=n||o.height,i=i||o.depth;const a=o.target||dt;t.bindTexture(a,e);const l=o.level||0,s=o.internalFormat||o.format||ct,c=kt(s),u=o.format||c.format;let f;const d=o.src;if(f=d&&(at(d)||Array.isArray(d)&&"number"==typeof d[0])?o.type||Ut(0,d,c.type):o.type||c.type,a===ht)for(let e=0;e<6;++e)t.texImage2D(_t+e,l,s,r,n,0,u,f,null);else a===pt||a===mt?t.texImage3D(a,l,s,r,n,i,0,u,f,null):t.texImage2D(a,l,s,r,n,0,u,f,null)}(t,a,o,r,n)}}))}function oo(t,e,o){o=o||36160,e?(t.bindFramebuffer(o,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(o,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}function ro(t){return t}function no(t,e){var o=function(t){if(null==t)return ro;var e,o,r=t.scale[0],n=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,l){l||(e=o=0);var s=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*r+i,u[1]=(o+=t[1])*n+a;s<c;)u[s]=t[s],++s;return u}}(t.transform),r=t.arcs;function n(t,e){e.length&&e.pop();for(var n=r[t<0?~t:t],i=0,a=n.length;i<a;++i)e.push(o(n[i],i));t<0&&function(t,e){for(var o,r=t.length,n=r-e;n<--r;)o=t[n],t[n++]=t[r],t[r]=o}(e,a)}function i(t){return o(t)}function a(t){for(var e=[],o=0,r=t.length;o<r;++o)n(t[o],e);return e.length<2&&e.push(e[0]),e}function l(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(l)}return function t(e){var o,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":o=i(e.coordinates);break;case"MultiPoint":o=e.coordinates.map(i);break;case"LineString":o=a(e.arcs);break;case"MultiLineString":o=e.arcs.map(a);break;case"Polygon":o=s(e.arcs);break;case"MultiPolygon":o=e.arcs.map(s);break;default:return null}return{type:r,coordinates:o}}(e)}function io(t,e){var o={},r={},n={},i=[],a=-1;function l(t,e){for(var r in t){var n=t[r];delete e[n.start],delete n.start,delete n.end,n.forEach((function(t){o[t<0?~t:t]=1})),i.push(n)}}return e.forEach((function(o,r){var n,i=t.arcs[o<0?~o:o];i.length<3&&!i[1][0]&&!i[1][1]&&(n=e[++a],e[a]=o,e[r]=n)})),e.forEach((function(e){var o,i,a=function(e){var o,r=t.arcs[e<0?~e:e],n=r[0];t.transform?(o=[0,0],r.forEach((function(t){o[0]+=t[0],o[1]+=t[1]}))):o=r[r.length-1];return e<0?[o,n]:[n,o]}(e),l=a[0],s=a[1];if(o=n[l])if(delete n[o.end],o.push(e),o.end=s,i=r[s]){delete r[i.start];var c=i===o?o:o.concat(i);r[c.start=o.start]=n[c.end=i.end]=c}else r[o.start]=n[o.end]=o;else if(o=r[s])if(delete r[o.start],o.unshift(e),o.start=l,i=n[l]){delete n[i.end];var u=i===o?o:i.concat(o);r[u.start=i.start]=n[u.end=o.end]=u}else r[o.start]=n[o.end]=o;else r[(o=[e]).start=l]=n[o.end=s]=o})),l(n,r),l(r,n),e.forEach((function(t){o[t<0?~t:t]||i.push([t])})),i}function ao(t){return no(t,lo.apply(this,arguments))}function lo(t,e,o){var r,n,i;if(arguments.length>1)r=so(t,e,o);else for(n=0,r=new Array(i=t.arcs.length);n<i;++n)r[n]=n;return{type:"MultiLineString",arcs:io(t,r)}}function so(t,e,o){var r,n=[],i=[];function a(t){var e=t<0?~t:t;(i[e]||(i[e]=[])).push({i:t,g:r})}function l(t){t.forEach(a)}function s(t){t.forEach(l)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":l(e.arcs);break;case"MultiLineString":case"Polygon":s(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(s)}(e.arcs)}}(e),i.forEach(null==o?function(t){n.push(t[0].i)}:function(t){o(t[0].g,t[t.length-1].g)&&n.push(t[0].i)}),n}Je[32854]=!0,Je[32855]=!0,Je[36194]=!0,Je[34041]=!0,Je[33189]=!0,Je[6401]=!0,Je[36168]=!0;var co="#define GLSLIFY 1\nattribute vec2 a_position;varying vec2 v_position;void main(){v_position=a_position;gl_Position=vec4(a_position,0,1);}",uo="precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_data;uniform sampler2D u_colormap;uniform float u_colormapN;uniform vec2 u_domain;uniform int u_scale;uniform vec4 u_baseColor;varying vec2 v_position;void main(){float value=texture2D(u_data,(v_position+1.0)/2.0).a;if(value<-1e99){gl_FragColor=u_baseColor;return;}float t;if(u_scale==0){t=(value-u_domain.x)/(u_domain.y-u_domain.x);}else if(u_scale==1){t=(log(value)-log(u_domain.x))/(log(u_domain.y)-log(u_domain.x));}t=clamp(t,0.0,1.0);float tOffset=(u_colormapN-1.0)/u_colormapN*(t-0.5)+0.5;gl_FragColor=texture2D(u_colormap,vec2(tOffset,0));}";const fo={a_position:{numComponents:2,data:[-1,-1,-1,1,1,-1,1,1,1,-1,-1,1]}};function ho(t,e,o,r,n){t.useProgram(e.program),function(t,e,o){o.vertexArrayObject?t.bindVertexArray(o.vertexArrayObject):(function(t,e){for(const o in e){const r=t[o];r&&r(e[o])}}(e.attribSetters||e,o.attribs),o.indices&&t.bindBuffer(34963,o.indices))}(t,e,o),Ue(e,r),function(t,e,o,r,n,i){o=void 0===o?4:o;const a=e.indices,l=e.elementType,s=void 0===r?e.numElements:r;n=void 0===n?0:n,l||a?void 0!==i?t.drawElementsInstanced(o,s,void 0===l?5123:e.elementType,n,i):t.drawElements(o,s,void 0===l?5123:e.elementType,n):void 0!==i?t.drawArraysInstanced(o,n,s,i):t.drawArrays(o,n,s)}(t,o,n)}class po{constructor(t,e){this._data=e.data,this._colormap=e.colormap,this._domain=e.domain,this._scale=e.scale,this._baseColor=e.baseColor,this._gl=t,this._webgl2=e.webgl2,this._gl.enable(t.BLEND),this._gl.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this._ext=this._gl.getExtension("OES_texture_half_float"),this._gl.getExtension("OES_texture_float"),this._programs=this._createPrograms(),this._buffers=this._createBuffers(e.vectorData),this._textures=this._createTextures(),this._framebuffers=this._createFramebuffers(),this._mapDataToColors(),this._dataNeedsRecolor=!1}set data(t){let e=this._data.width,o=this._data.width;this._data=t,e===this._data.width&&o===this._data.height||(this._textures.gridded=this._createGriddedTexture()),this._textures.data=this._createDataTexture(),this._framebuffers=this._createFramebuffers(),this._dataNeedsRecolor=!0}set colormap(t){this._colormap=t,this._textures.colormap=this._createColormapTexture(),this._dataNeedsRecolor=!0}set domain(t){this._domain=t,this._dataNeedsRecolor=!0}set scale(t){this._scale=t,this._dataNeedsRecolor=!0}set baseColor(t){this._baseColor=t,this._dataNeedsRecolor=!0}set vectorData(t){this._buffers.vectors=this._createVectorBuffers(t)}drawGriddedData(t){this._dataNeedsRecolor&&(this._mapDataToColors(),this._dataNeedsRecolor=!1),ho(this._gl,this._programs.gridded,this._buffers.gridded,{u_texture:this._textures.gridded,u_gridWidth:this._data.width,u_gridHeight:this._data.height,...t})}drawVectorData(t,e){for(const[o,r]of Object.entries(e)){let e=this._buffers.vectors[o];void 0!==e&&ho(this._gl,this._programs.vector,e,{u_color:r.map(((t,e)=>3===e?t:t/255)),...t},this._gl.LINES)}}_createPrograms(){let t=this._webgl2?uo.replace(/\)\.a;/g,").r;"):uo;return{gridded:Ge(this._gl,[co,"precision highp float;\n#define GLSLIFY 1\nconst float PI_3=radians(180.0);const float PI_2_1540259130=radians(90.0);void rotate_2(in vec2 lonLat0,inout vec2 lonLat){if(lonLat.x<-PI_3||lonLat.x>PI_3||lonLat.y<-PI_2_1540259130||lonLat.y>PI_2_1540259130){return;}vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLatitude=mat3(cos(-lonLat0.y),0,-sin(-lonLat0.y),0,1,0,sin(-lonLat0.y),0,cos(-lonLat0.y));xyzCoord=rotateLatitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));lonLat.x+=lonLat0.x;lonLat.x=mod(lonLat.x+PI_3,2.0*PI_3)-PI_3;}void equirectangular(in vec2 coord,in vec2 lonLat0,out vec2 lonLat){lonLat.x=coord.x;lonLat.y=coord.y;rotate_2(lonLat0,lonLat);}const float PI_4=radians(180.0);const float PI_2_1604150559=radians(90.0);void rotate_3(in vec2 lonLat0,inout vec2 lonLat){if(lonLat.x<-PI_4||lonLat.x>PI_4||lonLat.y<-PI_2_1604150559||lonLat.y>PI_2_1604150559){return;}vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLatitude=mat3(cos(-lonLat0.y),0,-sin(-lonLat0.y),0,1,0,sin(-lonLat0.y),0,cos(-lonLat0.y));xyzCoord=rotateLatitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));lonLat.x+=lonLat0.x;lonLat.x=mod(lonLat.x+PI_4,2.0*PI_4)-PI_4;}void mercator(in vec2 coord,in vec2 lonLat0,out vec2 lonLat){lonLat.x=coord.x;lonLat.y=2.0*atan(exp(coord.y))-radians(90.0);rotate_3(lonLat0,lonLat);}const float PI_1117569599=radians(180.0);const float PI_2_1117569599=radians(90.0);void rotate_1(in vec2 lonLat0,inout vec2 lonLat){if(lonLat.x<-PI_1117569599||lonLat.x>PI_1117569599||lonLat.y<-PI_2_1117569599||lonLat.y>PI_2_1117569599){return;}vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLatitude=mat3(cos(-lonLat0.y),0,-sin(-lonLat0.y),0,1,0,sin(-lonLat0.y),0,cos(-lonLat0.y));xyzCoord=rotateLatitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));lonLat.x+=lonLat0.x;lonLat.x=mod(lonLat.x+PI_1117569599,2.0*PI_1117569599)-PI_1117569599;}const float A1=1.340264;const float A2=-0.081106;const float A3=0.000893;const float A4=0.003796;const float M=sqrt(3.0)/2.0;const int iterations=12;void equalEarth(in vec2 coord,in vec2 lonLat0,out vec2 lonLat){float l=coord.y;float l2=l*l;float l6=l2*l2*l2;float delta,fy,fpy;for(int i=0;i<iterations;i++){fy=l*(A1+A2*l2+l6*(A3+A4*l2))-coord.y;fpy=A1+3.0*A2*l2+l6*(7.0*A3+9.0*A4*l2);delta=fy/fpy;l-=delta;l2=l*l;l6=l2*l2*l2;}lonLat.x=M*coord.x*(A1+3.0*A2*l2+l6*(7.0*A3+9.0*A4*l2))/cos(l);float sinY=sin(l)/M;if(sinY<-1.0||sinY>1.0){lonLat.y=100.0;}else{lonLat.y=asin(sinY);}rotate_1(lonLat0,lonLat);}const float PI_5=radians(180.0);void orthographic(in vec2 coord,in vec2 lonLat0,out vec2 lonLat){float rho=sqrt(pow(coord.x,2.0)+pow(coord.y,2.0));if(rho==0.0){lonLat=lonLat0;return;}if(rho>1.0){lonLat=vec2(100,100);return;}float c=asin(rho);float lon0=lonLat0.x;float lat0=lonLat0.y;float x=coord.x*sin(c);float y=rho*cos(c)*cos(lat0)-coord.y*sin(c)*sin(lat0);lonLat.x=lon0+atan(x,y);lonLat.y=asin(cos(c)*sin(lat0)+coord.y*sin(c)*cos(lat0)/rho);lonLat.x=mod(lonLat.x+PI_5,2.0*PI_5)-PI_5;}const float PI_0=radians(180.0);const float FOV_SCALAR_529295689=7.0;void verticalPerspective(in vec2 coord,in vec2 lonLat0,out vec2 lonLat,in float zoom){float rho2=pow(coord.x,2.0)+pow(coord.y,2.0);float rho=sqrt(rho2);if(rho==0.0){lonLat=lonLat0;return;}float P=1.0+(FOV_SCALAR_529295689/zoom);float squaredVal=1.0-rho2*(P+1.0)/(P-1.0);float sinc=(P-sqrt(squaredVal))/((P-1.0)/rho+rho/(P-1.0));if(sinc>1.0||squaredVal<0.0){lonLat=vec2(100,100);return;}float c=asin(sinc);float lon0=lonLat0.x;float lat0=lonLat0.y;float x=coord.x*sin(c);float y=rho*cos(c)*cos(lat0)-coord.y*sin(c)*sin(lat0);lonLat.x=lon0+atan(x,y);lonLat.y=asin(cos(c)*sin(lat0)+coord.y*sin(c)*cos(lat0)/rho);lonLat.x=mod(lonLat.x+PI_0,2.0*PI_0)-PI_0;}const float PI_1=radians(180.0);const float PI_2_1062606552=radians(90.0);void rotate_0(in vec2 lonLat0,inout vec2 lonLat){if(lonLat.x<-PI_1||lonLat.x>PI_1||lonLat.y<-PI_2_1062606552||lonLat.y>PI_2_1062606552){return;}vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLatitude=mat3(cos(-lonLat0.y),0,-sin(-lonLat0.y),0,1,0,sin(-lonLat0.y),0,cos(-lonLat0.y));xyzCoord=rotateLatitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));lonLat.x+=lonLat0.x;lonLat.x=mod(lonLat.x+PI_1,2.0*PI_1)-PI_1;}void sterographic(in vec2 coord,in vec2 lonLat0,out vec2 lonLat){float z=sqrt(pow(coord.x,2.0)+pow(coord.y,2.0));float c=2.0*atan(z);float sc=sin(c);float cc=cos(c);lonLat.x=atan(coord.x*sc,z*cc);if(z==0.0){lonLat.y=0.0;}else{lonLat.y=asin(coord.y*sc/z);}rotate_0(lonLat0,lonLat);}void invertProject(in vec2 displayCoord,in vec2 lonLat0,out vec2 lonLat,in float zoom,in int projection){if(projection==0){equirectangular(displayCoord,lonLat0,lonLat);}else if(projection==1){mercator(displayCoord,lonLat0,lonLat);}else if(projection==2){equalEarth(displayCoord,lonLat0,lonLat);}else if(projection==3){orthographic(displayCoord,lonLat0,lonLat);}else if(projection==4){verticalPerspective(displayCoord,lonLat0,lonLat,zoom);}else if(projection==5){sterographic(displayCoord,lonLat0,lonLat);}}const float PI_6=radians(180.0);const float PI_2_2315452051=radians(90.0);void projectToTexture(out vec2 textureCoord,in vec2 lonLat,in float gridWidth,in float gridHeight,in int projection){if(projection==0){textureCoord=(lonLat+vec2(0,PI_2_2315452051))/vec2(2.0*PI_6,PI_6);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==1){textureCoord=(lonLat+vec2(0,PI_2_2315452051))/vec2(2.0*PI_6,PI_6);textureCoord.x=mod(textureCoord.x,1.0);}else if(projection==3){textureCoord=(lonLat+vec2(PI_6,PI_2_2315452051))/vec2(2.0*PI_6,PI_6);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==2){textureCoord=(lonLat+vec2(radians(-20.0),PI_2_2315452051))/vec2(2.0*PI_6,PI_6);float xOffset=0.5/gridWidth;float xScale=1080.0/gridWidth;float yScale=(90.0/80.0)*(gridHeight-1.0)/gridHeight;textureCoord.x=mod(xScale*(textureCoord.x+xOffset),xScale);textureCoord.y=1.0-(yScale*(textureCoord.y-0.5)+0.5);if(textureCoord.y>1.0||textureCoord.y<0.0){textureCoord=vec2(0.0,0.5);}}}uniform float u_canvasRatio;uniform float u_lon0;uniform float u_lat0;uniform float u_zoom;uniform int u_projection;uniform int u_griddedDataProjection;uniform bool u_offsetGridded;uniform sampler2D u_texture;uniform float u_gridWidth;uniform float u_gridHeight;varying vec2 v_position;const float PI=radians(180.0);const float PI_2=radians(90.0);void main(){vec2 displayCoord=vec2(u_canvasRatio*PI_2,PI_2)*v_position;displayCoord=displayCoord/u_zoom;vec2 lonLat;vec2 lonLat0=radians(vec2(u_lon0,u_lat0));invertProject(displayCoord,lonLat0,lonLat,u_zoom,u_projection);if(lonLat.x>PI||lonLat.x<-PI||lonLat.y>PI_2||lonLat.y<-PI_2){gl_FragColor=vec4(0,0,0,0);return;}vec2 textureCoord;projectToTexture(textureCoord,lonLat,u_gridWidth,u_gridHeight,u_griddedDataProjection);gl_FragColor=texture2D(u_texture,textureCoord);}"]),vector:Ge(this._gl,["#define GLSLIFY 1\nconst float PI_1540259130=radians(180.0);void rotate_2(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_1540259130-radians(1.0);}void equirectangular(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_2(lonLat0,lonLat,clip);coord.x=lonLat.x;coord.y=lonLat.y;}const float PI_3=radians(180.0);void rotate_3(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_3-radians(1.0);}const float PI_2_1535977339=radians(90.0);void mercator(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_3(lonLat0,lonLat,clip);coord.x=lonLat.x;coord.y=log(tan((PI_2_1535977339+lonLat.y)/2.0));}const float PI_1=radians(180.0);void rotate_1(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_1-radians(1.0);}const float A1=1.340264;const float A2=-0.081106;const float A3=0.000893;const float A4=0.003796;const float M=sqrt(3.0)/2.0;void equalEarth(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_1(lonLat0,lonLat,clip);float l=asin(M*sin(lonLat.y));float l2=l*l;float l6=l2*l2*l2;coord.x=(lonLat.x)*cos(l)/(M*(A1+3.0*A2*l2+l6*(7.0*A3+9.0*A4*l2)));coord.y=l*(A1+A2*l2+l6*(A3+A4*l2));}void orthographic(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){float c=sin(lonLat0.y)*sin(lonLat.y)+cos(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);clip=c<0.0;coord.x=cos(lonLat.y)*sin(lonLat.x-lonLat0.x);coord.y=cos(lonLat0.y)*sin(lonLat.y)-sin(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);}const float FOV_SCALAR_529295689=7.0;void verticalPerspective(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip,in float zoom){float c=sin(lonLat0.y)*sin(lonLat.y)+cos(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);float P=1.0+(FOV_SCALAR_529295689/zoom);float k=(P-1.0)/(P-c);clip=c<1.0/P;coord.x=k*cos(lonLat.y)*sin(lonLat.x-lonLat0.x);coord.y=k*(cos(lonLat0.y)*sin(lonLat.y)-sin(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x));}const float PI_0=radians(180.0);void rotate_0(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_0-radians(1.0);}void stereographic(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_0(lonLat0,lonLat,clip);clip=false;float cy=cos(lonLat.y);float k=1.0+cos(lonLat.x)*cy;coord.x=cy*sin(lonLat.x)/k;coord.y=sin(lonLat.y)/k;}void forwardProject(out vec2 displayCoord,in vec2 lonLat0,in vec2 lonLat,out bool clip,in float zoom,in int projection){if(projection==0){equirectangular(displayCoord,lonLat0,lonLat,clip);}else if(projection==1){mercator(displayCoord,lonLat0,lonLat,clip);}else if(projection==2){equalEarth(displayCoord,lonLat0,lonLat,clip);}else if(projection==3){orthographic(displayCoord,lonLat0,lonLat,clip);}else if(projection==4){verticalPerspective(displayCoord,lonLat0,lonLat,clip,zoom);}else if(projection==5){stereographic(displayCoord,lonLat0,lonLat,clip);}}attribute vec2 a_lonLat;uniform float u_canvasRatio;uniform float u_lon0;uniform float u_lat0;uniform float u_zoom;uniform int u_projection;varying float v_clip;const float PI_2=radians(90.0);void main(){vec2 displayCoord;vec2 lonLat0=radians(vec2(u_lon0,u_lat0));vec2 lonLat=radians(a_lonLat);bool clip;forwardProject(displayCoord,lonLat0,lonLat,clip,u_zoom,u_projection);if(clip){v_clip=1.0;}else{v_clip=0.0;}displayCoord=u_zoom*displayCoord/PI_2;displayCoord.x=displayCoord.x/u_canvasRatio;gl_Position=vec4(displayCoord,0,1);}","precision mediump float;\n#define GLSLIFY 1\nuniform vec4 u_color;varying float v_clip;void main(){if(v_clip>0.0){gl_FragColor=vec4(0,0,0,0);}else{gl_FragColor=u_color;}}"]),colormap:Ge(this._gl,[co,t])}}_createBuffers(t){let e=ot(this._gl,fo);return{gridded:e,vectors:this._createVectorBuffers(t),colormap:e}}_createVectorBuffers(t){let e={};for(const[o,r]of Object.entries(t.objects))e[o]=mo(this._gl,t,r);return e}_createTextures(){return{gridded:this._createGriddedTexture(),data:this._createDataTexture(),colormap:this._createColormapTexture()}}_createGriddedTexture(){return le(this._gl,{mag:this._gl.NEAREST,min:this._gl.LINEAR,width:this._data.width,height:this._data.height})}_createDataTexture(){let t,e,o;return"Float32Array"!==this._data.floatArray.constructor.name?(t=new Uint16Array(this._data.floatArray.buffer),e=this._webgl2?this._gl.HALF_FLOAT:this._ext.HALF_FLOAT_OES,o=this._webgl2?this._gl.R16F:this._gl.ALPHA):(t=this._data.floatArray,e=this._gl.FLOAT,o=this._webgl2?this._gl.R32F:this._gl.ALPHA),le(this._gl,{src:t,type:e,format:this._webgl2?this._gl.RED:this._gl.ALPHA,internalFormat:o,minMag:this._gl.NEAREST,width:this._data.width,height:this._data.height})}_createColormapTexture(){return le(this._gl,{src:this._colormap.lut.flat(),format:this._gl.RGB,minMag:this._gl.LINEAR,width:this._colormap.lut.length,height:1})}_createFramebuffers(){return{gridded:to(this._gl,[{attachment:this._textures.gridded}],this._data.width,this._data.height)}}_mapDataToColors(){oo(this._gl,this._framebuffers.gridded),ho(this._gl,this._programs.colormap,this._buffers.colormap,{u_data:this._textures.data,u_colormap:this._textures.colormap,u_colormapN:this._colormap.lut.length,u_domain:this._domain,u_scale:"log"===this._scale?1:0,u_baseColor:this._baseColor.map(((t,e)=>3===e?t:t/255))}),oo(this._gl,null)}}function mo(t,e,o){let r=ao(e,o),n=0,i=[];for(let t=0;t<r.coordinates.length;t++){let e=n+r.coordinates[t].length-1;for(;n<e;n++)i.push(n),i.push(n+1);n=e+1}return ot(t,{a_lonLat:{numComponents:2,data:r.coordinates.flat(2)},indices:i})}var _o="precision highp float;\n#define GLSLIFY 1\nconst float PI=radians(180.0);const float PI_2_1540259130=radians(90.0);void projectToTexture(out vec2 textureCoord,in vec2 lonLat,in float gridWidth,in float gridHeight,in int projection){if(projection==0){textureCoord=(lonLat+vec2(0,PI_2_1540259130))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==1){textureCoord=(lonLat+vec2(0,PI_2_1540259130))/vec2(2.0*PI,PI);textureCoord.x=mod(textureCoord.x,1.0);}else if(projection==3){textureCoord=(lonLat+vec2(PI,PI_2_1540259130))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==2){textureCoord=(lonLat+vec2(radians(-20.0),PI_2_1540259130))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float xScale=1080.0/gridWidth;float yScale=(90.0/80.0)*(gridHeight-1.0)/gridHeight;textureCoord.x=mod(xScale*(textureCoord.x+xOffset),xScale);textureCoord.y=1.0-(yScale*(textureCoord.y-0.5)+0.5);if(textureCoord.y>1.0||textureCoord.y<0.0){textureCoord=vec2(0.0,0.5);}}}uniform sampler2D u_particleData;uniform sampler2D u_vectorFieldU;uniform sampler2D u_vectorFieldV;uniform sampler2D u_random;uniform vec2 u_randLonLatOffsets;uniform float u_gridWidth;uniform float u_gridHeight;uniform int u_particleDataProjection;uniform float u_particleLifetime;uniform float u_timeDelta;uniform float u_rate;varying vec2 v_position;const vec2 DIM=vec2(360.0,180.0);const vec2 DIM_2=vec2(180.0,90.0);const float M_PER_DEG=111319.5;void main(){vec2 id=(v_position+1.0)/2.0;vec4 data=texture2D(u_particleData,id);vec2 lonLat=data.rg;float lifetime=data.b+u_timeDelta;vec2 textureCoord;projectToTexture(textureCoord,radians(lonLat),u_gridWidth,u_gridHeight,u_particleDataProjection);vec2 velocity;velocity.x=texture2D(u_vectorFieldU,textureCoord).a;velocity.y=texture2D(u_vectorFieldV,textureCoord).a;float speed=length(velocity);if(lifetime>u_particleLifetime){float rx=texture2D(u_random,mod(id+10.0*u_randLonLatOffsets,1.0)).a;float ry=texture2D(u_random,mod(id-u_randLonLatOffsets.yx,1.0)).a;lonLat.x=DIM.x*rx-DIM_2.x;lonLat.y=(DIM.y/radians(DIM.y))*asin(2.0*ry-1.0);speed=0.0;lifetime-=u_particleLifetime;}else{float multiplier=u_rate*(u_timeDelta/1000.0)/M_PER_DEG;lonLat.x+=multiplier*velocity.x/cos(radians(lonLat.y));lonLat.y+=multiplier*velocity.y;}lonLat.x=mod(lonLat.x+DIM_2.x,DIM.x)-DIM_2.x;lonLat.y=clamp(lonLat.y,-DIM_2.y,DIM_2.y);gl_FragColor=vec4(lonLat,lifetime,speed);}",yo="precision mediump float;\n#define GLSLIFY 1\nuniform vec4 u_color;uniform float u_opacitySpeedDecay;varying float v_clip;varying float v_speed;void main(){if(v_clip>0.0||length(gl_PointCoord-vec2(0.5))>0.5){discard;}gl_FragColor=u_color;gl_FragColor.a*=1.0-pow(u_opacitySpeedDecay,v_speed);}",go="precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_texture;uniform float u_fade;varying vec2 v_position;const float MIN_FADE=512.0;void main(){gl_FragColor=texture2D(u_texture,(v_position+1.0)/2.0);gl_FragColor.a=floor(MIN_FADE*gl_FragColor.a*u_fade)/MIN_FADE;}";function xo(t){let e=new Float32Array(t);for(let t=0;t<e.length;t++)e[t]=360*Math.random()-180;return e}function vo(t){let e=new Float32Array(t);for(let t=0;t<e.length;t++)e[t]=180/Math.PI*Math.asin(2*Math.random()-1);return e}function Lo(t,e){let o=new Float32Array(e);for(let e=0;e<o.length;e++)o[e]=t*Math.random();return o}class bo{constructor(t,e){this._count=this._roundToSquareNumber(e.count),this._lifetime=e.lifetime,this._data=e.data,this._gl=t,this._webgl2=e.webgl2,this._gl.enable(t.BLEND),this._webgl2||(this._ext=this._gl.getExtension("OES_texture_half_float"),this._gl.getExtension("OES_texture_half_float_linear"),this._gl.getExtension("OES_texture_float")),this._gl.getExtension("OES_texture_float_linear"),this._programs=this._createPrograms(),this._buffers=this._createBuffers(),this._textures=this._createTextures(),this._framebuffers=this._createFramebuffers(),this._majorPerformanceCaveat=e.majorPerformanceCaveat,this._majorPerformanceCaveat?this._gl.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA):this._gl.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}set count(t){this._count=this._roundToSquareNumber(t),this._gl.deleteBuffer(this._buffers.draw.indices),this._gl.deleteTexture(this._textures.simA),this._gl.deleteTexture(this._textures.simB),this._gl.deleteFramebuffer(this._framebuffers.simA.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simB.framebuffer),this._buffers.draw=this._createDrawBuffer(),this._textures.simA=this._createSimATexture(),this._textures.simB=this._createSimBTexture(),this._framebuffers=this._createFramebuffers()}set lifetime(t){this._lifetime=t,this._textures.simA=this._createSimATexture(),this._framebuffers=this._createFramebuffers()}set data(t){this._data=t,this._gl.deleteTexture(this._textures.vectorField),this._textures.vectorFieldU=this._createVectorFieldTexture(this._data.uVelocities),this._textures.vectorFieldV=this._createVectorFieldTexture(this._data.vVelocities)}step(t,e,o){oo(this._gl,this._framebuffers.simB),this._gl.disable(this._gl.BLEND),ho(this._gl,this._programs.sim,this._buffers.sim,{u_particleData:this._textures.simA,u_vectorFieldU:this._textures.vectorFieldU,u_vectorFieldV:this._textures.vectorFieldV,u_random:this._textures.random,u_particleLifetime:this._lifetime,u_randLonLatOffsets:[Math.random(),Math.random()],u_gridWidth:this._data.width,u_gridHeight:this._data.height,u_timeDelta:e,u_rate:o,...t}),this._gl.enable(this._gl.BLEND),oo(this._gl,null),[this._textures.simA,this._textures.simB]=[this._textures.simB,this._textures.simA],[this._framebuffers.simA,this._framebuffers.simB]=[this._framebuffers.simB,this._framebuffers.simA]}draw(t,e,o,r){ho(this._gl,this._programs.draw,this._buffers.draw,{u_particlePositions:this._textures.simA,u_particleCountSqrt:Math.sqrt(this._count),u_size:e,u_color:[1,1,1,o],u_opacitySpeedDecay:r,...t},this._gl.POINTS)}drawWithTrails(t,e,o,r,n){oo(this._gl,this._framebuffers.particleTrailsB),this._majorPerformanceCaveat?(this._gl.clear(this._gl.COLOR_BUFFER_BIT),o/=4):this._gl.disable(this._gl.BLEND),ho(this._gl,this._programs.texture,this._buffers.texture,{u_texture:this._textures.particleTrailsA,u_fade:n}),this._majorPerformanceCaveat||this._gl.enable(this._gl.BLEND),this.draw(t,e,o,r),oo(this._gl,null),ho(this._gl,this._programs.texture,this._buffers.texture,{u_texture:this._textures.particleTrailsB,u_fade:1}),[this._textures.particleTrailsA,this._textures.particleTrailsB]=[this._textures.particleTrailsB,this._textures.particleTrailsA],[this._framebuffers.particleTrailsA,this._framebuffers.particleTrailsB]=[this._framebuffers.particleTrailsB,this._framebuffers.particleTrailsA]}resetTrails(){eo(this._gl,this._framebuffers.particleTrailsA,[{attachment:this._textures.particleTrailsA}]),eo(this._gl,this._framebuffers.particleTrailsB,[{attachment:this._textures.particleTrailsB}]),oo(this._gl,this._framebuffers.particleTrailsA),this._gl.clear(this._gl.COLOR_BUFFER_BIT),oo(this._gl,null)}_createPrograms(){let t=this._webgl2?_o.replace(/\)\.a;/g,").r;"):_o;return{sim:Ge(this._gl,[co,t]),draw:Ge(this._gl,["#define GLSLIFY 1\nconst float PI_1540259130=radians(180.0);void rotate_2(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_1540259130-radians(1.0);}void equirectangular(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_2(lonLat0,lonLat,clip);coord.x=lonLat.x;coord.y=lonLat.y;}const float PI_3=radians(180.0);void rotate_3(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_3-radians(1.0);}const float PI_2_1535977339=radians(90.0);void mercator(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_3(lonLat0,lonLat,clip);coord.x=lonLat.x;coord.y=log(tan((PI_2_1535977339+lonLat.y)/2.0));}const float PI_1=radians(180.0);void rotate_1(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_1-radians(1.0);}const float A1=1.340264;const float A2=-0.081106;const float A3=0.000893;const float A4=0.003796;const float M=sqrt(3.0)/2.0;void equalEarth(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_1(lonLat0,lonLat,clip);float l=asin(M*sin(lonLat.y));float l2=l*l;float l6=l2*l2*l2;coord.x=(lonLat.x)*cos(l)/(M*(A1+3.0*A2*l2+l6*(7.0*A3+9.0*A4*l2)));coord.y=l*(A1+A2*l2+l6*(A3+A4*l2));}void orthographic(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){float c=sin(lonLat0.y)*sin(lonLat.y)+cos(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);clip=c<0.0;coord.x=cos(lonLat.y)*sin(lonLat.x-lonLat0.x);coord.y=cos(lonLat0.y)*sin(lonLat.y)-sin(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);}const float FOV_SCALAR_529295689=7.0;void verticalPerspective(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip,in float zoom){float c=sin(lonLat0.y)*sin(lonLat.y)+cos(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);float P=1.0+(FOV_SCALAR_529295689/zoom);float k=(P-1.0)/(P-c);clip=c<1.0/P;coord.x=k*cos(lonLat.y)*sin(lonLat.x-lonLat0.x);coord.y=k*(cos(lonLat0.y)*sin(lonLat.y)-sin(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x));}const float PI_0=radians(180.0);void rotate_0(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_0-radians(1.0);}void stereographic(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_0(lonLat0,lonLat,clip);clip=false;float cy=cos(lonLat.y);float k=1.0+cos(lonLat.x)*cy;coord.x=cy*sin(lonLat.x)/k;coord.y=sin(lonLat.y)/k;}void forwardProject(out vec2 displayCoord,in vec2 lonLat0,in vec2 lonLat,out bool clip,in float zoom,in int projection){if(projection==0){equirectangular(displayCoord,lonLat0,lonLat,clip);}else if(projection==1){mercator(displayCoord,lonLat0,lonLat,clip);}else if(projection==2){equalEarth(displayCoord,lonLat0,lonLat,clip);}else if(projection==3){orthographic(displayCoord,lonLat0,lonLat,clip);}else if(projection==4){verticalPerspective(displayCoord,lonLat0,lonLat,clip,zoom);}else if(projection==5){stereographic(displayCoord,lonLat0,lonLat,clip);}}attribute vec2 a_particleIndex;uniform sampler2D u_particlePositions;uniform float u_particleCountSqrt;uniform float u_canvasRatio;uniform float u_screenRatio;uniform float u_lon0;uniform float u_lat0;uniform float u_zoom;uniform int u_projection;uniform float u_size;varying float v_clip;varying float v_speed;const float PI_2=radians(90.0);void main(){vec2 displayCoord;vec2 lonLat0=radians(vec2(u_lon0,u_lat0));vec2 texCoord=a_particleIndex/u_particleCountSqrt;vec4 data=texture2D(u_particlePositions,texCoord);vec2 lonLat=radians(data.rg);v_speed=data.a;bool clip;forwardProject(displayCoord,lonLat0,lonLat,clip,u_zoom,u_projection);if(clip){v_clip=1.0;}else{v_clip=0.0;}displayCoord=u_zoom*displayCoord/PI_2;displayCoord.x=displayCoord.x/u_canvasRatio;gl_PointSize=u_size*u_zoom*u_screenRatio;gl_Position=vec4(displayCoord,0,1);}",yo]),texture:Ge(this._gl,[co,go])}}_createBuffers(){let t=ot(this._gl,fo);return{sim:t,draw:this._createDrawBuffer(),texture:t}}_createDrawBuffer(){let t=new Float32Array(2*this._count);for(let e=0;e<t.length;e++){let o=Math.floor(e/2);t[e]=e%2==0?Math.floor(o/Math.sqrt(this._count)):o%Math.sqrt(this._count)}return ot(this._gl,{a_particleIndex:{numComponents:2,data:t}})}_createTextures(){return{random:le(this._gl,{src:Lo(1,Math.pow(128,2)),type:this._gl.FLOAT,format:this._webgl2?this._gl.RED:this._gl.ALPHA,internalFormat:this._webgl2?this._gl.R32F:this._gl.ALPHA,minMag:this._gl.NEAREST,width:128,height:128}),simA:this._createSimATexture(),simB:this._createSimBTexture(),vectorFieldU:this._createVectorFieldTexture(this._data.uVelocities),vectorFieldV:this._createVectorFieldTexture(this._data.vVelocities),particleTrailsA:this._createParticleTrailsTexture(),particleTrailsB:this._createParticleTrailsTexture()}}_createSimATexture(){return le(this._gl,{type:this._gl.FLOAT,format:this._gl.RGBA,internalFormat:this._webgl2?this._gl.RGBA32F:this._gl.RGBA,minMag:this._gl.NEAREST,width:Math.sqrt(this._count),height:Math.sqrt(this._count),src:Po(xo(this._count),vo(this._count),Lo(this._lifetime,this._count))})}_createSimBTexture(){return le(this._gl,{type:this._gl.FLOAT,format:this._gl.RGBA,internalFormat:this._webgl2?this._gl.RGBA32F:this._gl.RGBA,minMag:this._gl.NEAREST,width:Math.sqrt(this._count),height:Math.sqrt(this._count)})}_createVectorFieldTexture(t){let e,o,r;return"Float32Array"!==this._data.uVelocities.constructor.name?(t=new Uint16Array(t.buffer),e=this._webgl2?this._gl.HALF_FLOAT:this._ext.HALF_FLOAT_OES,o=this._webgl2?this._gl.RED:this._gl.ALPHA,r=this._webgl2?this._gl.R16F:this._gl.ALPHA):(e=this._gl.FLOAT,o=this._webgl2?this._gl.RED:this._gl.ALPHA,r=this._webgl2?this._gl.R32F:this._gl.ALPHA),le(this._gl,{src:t,type:e,format:o,internalFormat:r,minMag:this._gl.LINEAR,width:this._data.width,height:this._data.height})}_createParticleTrailsTexture(){return le(this._gl,{minMag:this._gl.NEAREST,width:this._gl.canvas.width*window.devicePixelRatio,height:this._gl.canvas.height*window.devicePixelRatio})}_createFramebuffers(){return{...this._createSimFramebuffers(),particleTrailsA:this._createParticleTrailsFramebuffer(this._textures.particleTrailsA),particleTrailsB:this._createParticleTrailsFramebuffer(this._textures.particleTrailsB)}}_createSimFramebuffers(){return{simA:to(this._gl,[{attachment:this._textures.simA}],Math.sqrt(this._count),Math.sqrt(this._count)),simB:to(this._gl,[{attachment:this._textures.simB}],Math.sqrt(this._count),Math.sqrt(this._count))}}_createParticleTrailsFramebuffer(t){return to(this._gl,[{attachment:t}],this._gl.canvas.width*window.devicePixelRatio,this._gl.canvas.height*window.devicePixelRatio)}_roundToSquareNumber(t){return Math.pow(Math.floor(Math.sqrt(t)),2)}}function Po(t,e,o,r){let n=new Float32Array(4*t.length);for(let i=0;i<n.length;i++)i%4==0?n[i]=t[i/4]:i%4==1?n[i]=e[Math.floor(i/4)]:i%4==2&&o?n[i]=o[Math.floor(i/4)]:r&&(n[i]=r[Math.floor(i/4)]);return n}var Ao="precision highp float;\n#define GLSLIFY 1\nvec4 encodeToRGBA(in float value,in float scale,in float off){float normalizedVal=(value-off)/scale;vec4 rgba;float v=normalizedVal;v*=256.0;rgba.a=floor(v);v=fract(v);v*=256.0;rgba.b=floor(v);v=fract(v);v*=256.0;rgba.g=floor(v);v=fract(v);v*=256.0;rgba.r=floor(v+0.5);return rgba/255.0;}const vec4 bitPlaces=vec4(pow(256.0,4.0),pow(256.0,3.0),pow(256.0,2.0),pow(256.0,1.0));float decodeFromRGBA(in vec4 rgba,in float scale,in float off){vec4 integers=floor(255.0*rgba+0.5);return scale*dot(integers,1.0/bitPlaces)+off;}const float PI=radians(180.0);const float PI_2_1117569599=radians(90.0);void projectToTexture(out vec2 textureCoord,in vec2 lonLat,in float gridWidth,in float gridHeight,in int projection){if(projection==0){textureCoord=(lonLat+vec2(0,PI_2_1117569599))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==1){textureCoord=(lonLat+vec2(0,PI_2_1117569599))/vec2(2.0*PI,PI);textureCoord.x=mod(textureCoord.x,1.0);}else if(projection==3){textureCoord=(lonLat+vec2(PI,PI_2_1117569599))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==2){textureCoord=(lonLat+vec2(radians(-20.0),PI_2_1117569599))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float xScale=1080.0/gridWidth;float yScale=(90.0/80.0)*(gridHeight-1.0)/gridHeight;textureCoord.x=mod(xScale*(textureCoord.x+xOffset),xScale);textureCoord.y=1.0-(yScale*(textureCoord.y-0.5)+0.5);if(textureCoord.y>1.0||textureCoord.y<0.0){textureCoord=vec2(0.0,0.5);}}}uniform sampler2D u_particleLongitudes;uniform sampler2D u_particleLatitudes;uniform sampler2D u_particleLifetimes;uniform sampler2D u_vectorFieldU;uniform sampler2D u_random;uniform vec2 u_randLonLatOffsets;uniform float u_gridWidth;uniform float u_gridHeight;uniform int u_particleDataProjection;uniform float u_particleLifetime;uniform float u_timeDelta;uniform float u_rate;varying vec2 v_position;const vec2 DIM=vec2(360.0,180.0);const vec2 DIM_2=vec2(180.0,90.0);const float M_PER_DEG=111319.5;void main(){vec2 id=(v_position+1.0)/2.0;vec2 lonLat=vec2(decodeFromRGBA(texture2D(u_particleLongitudes,id),DIM.x,-DIM_2.x),decodeFromRGBA(texture2D(u_particleLatitudes,id),DIM.y,-DIM_2.y));float lifetime=decodeFromRGBA(texture2D(u_particleLifetimes,id),u_particleLifetime,0.0);lifetime+=u_timeDelta;vec2 textureCoord;projectToTexture(textureCoord,radians(lonLat),u_gridWidth,u_gridHeight,u_particleDataProjection);float velocity=texture2D(u_vectorFieldU,textureCoord).a;if(lifetime>u_particleLifetime){float rx=texture2D(u_random,mod(id+10.0*u_randLonLatOffsets,1.0)).a;float ry=texture2D(u_random,mod(id-u_randLonLatOffsets.yx,1.0)).a;lonLat.x=DIM.x*rx-DIM_2.x;}else{float multiplier=u_rate*(u_timeDelta/1000.0)/M_PER_DEG;lonLat.x+=multiplier*velocity/cos(radians(lonLat.y));}lonLat.x=mod(lonLat.x+DIM_2.x,DIM.x)-DIM_2.x;gl_FragColor=encodeToRGBA(lonLat.x,DIM.x,-DIM_2.x);}",Co="precision highp float;\n#define GLSLIFY 1\nvec4 encodeToRGBA(in float value,in float scale,in float off){float normalizedVal=(value-off)/scale;vec4 rgba;float v=normalizedVal;v*=256.0;rgba.a=floor(v);v=fract(v);v*=256.0;rgba.b=floor(v);v=fract(v);v*=256.0;rgba.g=floor(v);v=fract(v);v*=256.0;rgba.r=floor(v+0.5);return rgba/255.0;}const vec4 bitPlaces=vec4(pow(256.0,4.0),pow(256.0,3.0),pow(256.0,2.0),pow(256.0,1.0));float decodeFromRGBA(in vec4 rgba,in float scale,in float off){vec4 integers=floor(255.0*rgba+0.5);return scale*dot(integers,1.0/bitPlaces)+off;}const float PI=radians(180.0);const float PI_2_1117569599=radians(90.0);void projectToTexture(out vec2 textureCoord,in vec2 lonLat,in float gridWidth,in float gridHeight,in int projection){if(projection==0){textureCoord=(lonLat+vec2(0,PI_2_1117569599))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==1){textureCoord=(lonLat+vec2(0,PI_2_1117569599))/vec2(2.0*PI,PI);textureCoord.x=mod(textureCoord.x,1.0);}else if(projection==3){textureCoord=(lonLat+vec2(PI,PI_2_1117569599))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==2){textureCoord=(lonLat+vec2(radians(-20.0),PI_2_1117569599))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float xScale=1080.0/gridWidth;float yScale=(90.0/80.0)*(gridHeight-1.0)/gridHeight;textureCoord.x=mod(xScale*(textureCoord.x+xOffset),xScale);textureCoord.y=1.0-(yScale*(textureCoord.y-0.5)+0.5);if(textureCoord.y>1.0||textureCoord.y<0.0){textureCoord=vec2(0.0,0.5);}}}uniform sampler2D u_particleLongitudes;uniform sampler2D u_particleLatitudes;uniform sampler2D u_particleLifetimes;uniform sampler2D u_vectorFieldV;uniform sampler2D u_random;uniform vec2 u_randLonLatOffsets;uniform float u_gridWidth;uniform float u_gridHeight;uniform int u_particleDataProjection;uniform float u_particleLifetime;uniform float u_timeDelta;uniform float u_rate;varying vec2 v_position;const vec2 DIM=vec2(360.0,180.0);const vec2 DIM_2=vec2(180.0,90.0);const float M_PER_DEG=111319.5;void main(){vec2 id=(v_position+1.0)/2.0;vec2 lonLat=vec2(decodeFromRGBA(texture2D(u_particleLongitudes,id),DIM.x,-DIM_2.x),decodeFromRGBA(texture2D(u_particleLatitudes,id),DIM.y,-DIM_2.y));float lifetime=decodeFromRGBA(texture2D(u_particleLifetimes,id),u_particleLifetime,0.0);lifetime+=u_timeDelta;vec2 textureCoord;projectToTexture(textureCoord,radians(lonLat),u_gridWidth,u_gridHeight,u_particleDataProjection);float velocity=texture2D(u_vectorFieldV,textureCoord).a;if(lifetime>u_particleLifetime){float ry=texture2D(u_random,mod(id-u_randLonLatOffsets.yx,1.0)).a;lonLat.y=(DIM.y/radians(DIM.y))*asin(2.0*ry-1.0);}else{float multiplier=u_rate*(u_timeDelta/1000.0)/M_PER_DEG;lonLat.y+=multiplier*velocity;}lonLat.y=clamp(lonLat.y,-DIM_2.y,DIM_2.y);gl_FragColor=encodeToRGBA(lonLat.y,DIM.y,-DIM_2.y);}",wo="precision highp float;\n#define GLSLIFY 1\nvec4 encodeToRGBA(in float value,in float scale,in float off){float normalizedVal=(value-off)/scale;vec4 rgba;float v=normalizedVal;v*=256.0;rgba.a=floor(v);v=fract(v);v*=256.0;rgba.b=floor(v);v=fract(v);v*=256.0;rgba.g=floor(v);v=fract(v);v*=256.0;rgba.r=floor(v+0.5);return rgba/255.0;}const vec4 bitPlaces=vec4(pow(256.0,4.0),pow(256.0,3.0),pow(256.0,2.0),pow(256.0,1.0));float decodeFromRGBA(in vec4 rgba,in float scale,in float off){vec4 integers=floor(255.0*rgba+0.5);return scale*dot(integers,1.0/bitPlaces)+off;}const float MAX_SPEED_1117569599=10000.0;const float PI=radians(180.0);const float PI_2_2281831123=radians(90.0);void projectToTexture(out vec2 textureCoord,in vec2 lonLat,in float gridWidth,in float gridHeight,in int projection){if(projection==0){textureCoord=(lonLat+vec2(0,PI_2_2281831123))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==1){textureCoord=(lonLat+vec2(0,PI_2_2281831123))/vec2(2.0*PI,PI);textureCoord.x=mod(textureCoord.x,1.0);}else if(projection==3){textureCoord=(lonLat+vec2(PI,PI_2_2281831123))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float yScale=(gridHeight-1.0)/gridHeight;textureCoord.x=mod(textureCoord.x+xOffset,1.0);textureCoord.y=yScale*(textureCoord.y-0.5)+0.5;}else if(projection==2){textureCoord=(lonLat+vec2(radians(-20.0),PI_2_2281831123))/vec2(2.0*PI,PI);float xOffset=0.5/gridWidth;float xScale=1080.0/gridWidth;float yScale=(90.0/80.0)*(gridHeight-1.0)/gridHeight;textureCoord.x=mod(xScale*(textureCoord.x+xOffset),xScale);textureCoord.y=1.0-(yScale*(textureCoord.y-0.5)+0.5);if(textureCoord.y>1.0||textureCoord.y<0.0){textureCoord=vec2(0.0,0.5);}}}uniform sampler2D u_particleLongitudes;uniform sampler2D u_particleLatitudes;uniform sampler2D u_particleLifetimes;uniform sampler2D u_vectorFieldU;uniform sampler2D u_vectorFieldV;uniform float u_gridWidth;uniform float u_gridHeight;uniform int u_particleDataProjection;uniform float u_particleLifetime;uniform float u_timeDelta;varying vec2 v_position;const vec2 DIM=vec2(360.0,180.0);const vec2 DIM_2=vec2(180.0,90.0);void main(){vec2 id=(v_position+1.0)/2.0;vec2 lonLat=vec2(decodeFromRGBA(texture2D(u_particleLongitudes,id),DIM.x,-DIM_2.x),decodeFromRGBA(texture2D(u_particleLatitudes,id),DIM.y,-DIM_2.y));float lifetime=decodeFromRGBA(texture2D(u_particleLifetimes,id),u_particleLifetime,0.0);lifetime+=u_timeDelta;vec2 textureCoord;projectToTexture(textureCoord,radians(lonLat),u_gridWidth,u_gridHeight,u_particleDataProjection);vec2 velocity;velocity.x=texture2D(u_vectorFieldU,textureCoord).a;velocity.y=texture2D(u_vectorFieldV,textureCoord).a;float speed=length(velocity);if(lifetime>u_particleLifetime){speed=0.0;}gl_FragColor=encodeToRGBA(speed,MAX_SPEED_1117569599,0.0);}";class Fo extends bo{set count(t){this._count=this._roundToSquareNumber(t),this._gl.deleteBuffer(this._buffers.draw.indices),this._gl.deleteTexture(this._textures.simA.longitudes),this._gl.deleteTexture(this._textures.simA.latitudes),this._gl.deleteTexture(this._textures.simA.lifetimes),this._gl.deleteTexture(this._textures.simA.speeds),this._gl.deleteTexture(this._textures.simB.longitudes),this._gl.deleteTexture(this._textures.simB.latitudes),this._gl.deleteTexture(this._textures.simB.lifetimes),this._gl.deleteTexture(this._textures.simB.speeds),this._gl.deleteFramebuffer(this._framebuffers.simA.longitudes.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simA.latitudes.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simA.lifetimes.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simA.speeds.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simB.longitudes.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simB.latitudes.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simB.lifetimes.framebuffer),this._gl.deleteFramebuffer(this._framebuffers.simB.speeds.framebuffer),this._buffers.draw=this._createDrawBuffer(),this._textures.simA=this._createSimATexture(),this._textures.simB=this._createSimBTexture(),this._framebuffers=this._createFramebuffers()}step(t,e,o){const r={u_particleLongitudes:this._textures.simA.longitudes,u_particleLatitudes:this._textures.simA.latitudes,u_particleLifetimes:this._textures.simA.lifetimes,u_vectorFieldU:this._textures.vectorFieldU,u_vectorFieldV:this._textures.vectorFieldV,u_random:this._textures.random,u_particleLifetime:this._lifetime,u_randLonLatOffsets:[Math.random(),Math.random()],u_gridWidth:this._data.width,u_gridHeight:this._data.height,u_timeDelta:e,u_rate:o,...t};this._gl.disable(this._gl.BLEND),oo(this._gl,this._framebuffers.simB.longitudes),ho(this._gl,this._programs.sim.longitudes,this._buffers.sim,r),oo(this._gl,this._framebuffers.simB.latitudes),ho(this._gl,this._programs.sim.latitudes,this._buffers.sim,r),oo(this._gl,this._framebuffers.simB.lifetimes),ho(this._gl,this._programs.sim.lifetimes,this._buffers.sim,r),oo(this._gl,this._framebuffers.simB.speeds),ho(this._gl,this._programs.sim.speeds,this._buffers.sim,r),this._gl.enable(this._gl.BLEND),oo(this._gl,null),[this._textures.simA.longitudes,this._textures.simB.longitudes]=[this._textures.simB.longitudes,this._textures.simA.longitudes],[this._textures.simA.latitudes,this._textures.simB.latitudes]=[this._textures.simB.latitudes,this._textures.simA.latitudes],[this._textures.simA.lifetimes,this._textures.simB.lifetimes]=[this._textures.simB.lifetimes,this._textures.simA.lifetimes],[this._textures.simA.speeds,this._textures.simB.speeds]=[this._textures.simB.speeds,this._textures.simA.speeds],[this._framebuffers.simA,this._framebuffers.simB]=[this._framebuffers.simB,this._framebuffers.simA]}draw(t,e,o,r){super.draw({u_particleLongitudes:this._textures.simA.longitudes,u_particleLatitudes:this._textures.simA.latitudes,u_particleSpeeds:this._textures.simA.speeds,...t},e,o,r)}drawWithTrails(t,e,o,r,n){super.drawWithTrails({u_particleLongitudes:this._textures.simA.longitudes,u_particleLatitudes:this._textures.simA.latitudes,u_particleSpeeds:this._textures.simA.speeds,...t},e,o,r,n)}_createPrograms(){let t=this._webgl2?Ao.replace(/\)\.a;/g,").r;"):Ao,e=this._webgl2?Co.replace(/\)\.a;/g,").r;"):Co,o=this._webgl2?wo.replace(/\)\.a;/g,").r;"):wo;return{sim:{longitudes:Ge(this._gl,[co,t]),latitudes:Ge(this._gl,[co,e]),lifetimes:Ge(this._gl,[co,"precision highp float;\n#define GLSLIFY 1\nvec4 encodeToRGBA(in float value,in float scale,in float off){float normalizedVal=(value-off)/scale;vec4 rgba;float v=normalizedVal;v*=256.0;rgba.a=floor(v);v=fract(v);v*=256.0;rgba.b=floor(v);v=fract(v);v*=256.0;rgba.g=floor(v);v=fract(v);v*=256.0;rgba.r=floor(v+0.5);return rgba/255.0;}const vec4 bitPlaces=vec4(pow(256.0,4.0),pow(256.0,3.0),pow(256.0,2.0),pow(256.0,1.0));float decodeFromRGBA(in vec4 rgba,in float scale,in float off){vec4 integers=floor(255.0*rgba+0.5);return scale*dot(integers,1.0/bitPlaces)+off;}uniform sampler2D u_particleLifetimes;uniform float u_particleLifetime;uniform float u_timeDelta;varying vec2 v_position;void main(){vec2 id=(v_position+1.0)/2.0;float lifetime=decodeFromRGBA(texture2D(u_particleLifetimes,id),u_particleLifetime,0.0);lifetime+=u_timeDelta;if(lifetime>u_particleLifetime){lifetime-=u_particleLifetime;}gl_FragColor=encodeToRGBA(lifetime,u_particleLifetime,0.0);}"]),speeds:Ge(this._gl,[co,o])},draw:Ge(this._gl,["#define GLSLIFY 1\nconst float PI_1540259130=radians(180.0);void rotate_2(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_1540259130-radians(1.0);}void equirectangular(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_2(lonLat0,lonLat,clip);coord.x=lonLat.x;coord.y=lonLat.y;}const float PI_3=radians(180.0);void rotate_3(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_3-radians(1.0);}const float PI_2_870892966=radians(90.0);void mercator(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_3(lonLat0,lonLat,clip);coord.x=lonLat.x;coord.y=log(tan((PI_2_870892966+lonLat.y)/2.0));}const float PI_1=radians(180.0);void rotate_1(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_1-radians(1.0);}const float A1=1.340264;const float A2=-0.081106;const float A3=0.000893;const float A4=0.003796;const float M=sqrt(3.0)/2.0;void equalEarth(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_1(lonLat0,lonLat,clip);float l=asin(M*sin(lonLat.y));float l2=l*l;float l6=l2*l2*l2;coord.x=(lonLat.x)*cos(l)/(M*(A1+3.0*A2*l2+l6*(7.0*A3+9.0*A4*l2)));coord.y=l*(A1+A2*l2+l6*(A3+A4*l2));}void orthographic(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){float c=sin(lonLat0.y)*sin(lonLat.y)+cos(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);clip=c<0.0;coord.x=cos(lonLat.y)*sin(lonLat.x-lonLat0.x);coord.y=cos(lonLat0.y)*sin(lonLat.y)-sin(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);}const float FOV_SCALAR_529295689=7.0;void verticalPerspective(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip,in float zoom){float c=sin(lonLat0.y)*sin(lonLat.y)+cos(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x);float P=1.0+(FOV_SCALAR_529295689/zoom);float k=(P-1.0)/(P-c);clip=c<1.0/P;coord.x=k*cos(lonLat.y)*sin(lonLat.x-lonLat0.x);coord.y=k*(cos(lonLat0.y)*sin(lonLat.y)-sin(lonLat0.y)*cos(lonLat.y)*cos(lonLat.x-lonLat0.x));}const float PI_0=radians(180.0);void rotate_0(in vec2 lonLat0,inout vec2 lonLat,out bool clip){vec3 xyzCoord=vec3(cos(lonLat.x)*cos(lonLat.y),sin(lonLat.x)*cos(lonLat.y),sin(lonLat.y));mat3 rotateLongitude=mat3(cos(lonLat0.x),-sin(lonLat0.x),0,sin(lonLat0.x),cos(lonLat0.x),0,0,0,1);mat3 rotateLatitude=mat3(cos(lonLat0.y),0,-sin(lonLat0.y),0,1,0,sin(lonLat0.y),0,cos(lonLat0.y));xyzCoord=rotateLatitude*rotateLongitude*xyzCoord;lonLat=vec2(atan(xyzCoord.y,xyzCoord.x),asin(xyzCoord.z));float distanceFromMeridian=abs(lonLat.x);clip=distanceFromMeridian>PI_0-radians(1.0);}void stereographic(out vec2 coord,in vec2 lonLat0,in vec2 lonLat,out bool clip){rotate_0(lonLat0,lonLat,clip);clip=false;float cy=cos(lonLat.y);float k=1.0+cos(lonLat.x)*cy;coord.x=cy*sin(lonLat.x)/k;coord.y=sin(lonLat.y)/k;}void forwardProject(out vec2 displayCoord,in vec2 lonLat0,in vec2 lonLat,out bool clip,in float zoom,in int projection){if(projection==0){equirectangular(displayCoord,lonLat0,lonLat,clip);}else if(projection==1){mercator(displayCoord,lonLat0,lonLat,clip);}else if(projection==2){equalEarth(displayCoord,lonLat0,lonLat,clip);}else if(projection==3){orthographic(displayCoord,lonLat0,lonLat,clip);}else if(projection==4){verticalPerspective(displayCoord,lonLat0,lonLat,clip,zoom);}else if(projection==5){stereographic(displayCoord,lonLat0,lonLat,clip);}}const vec4 bitPlaces=vec4(pow(256.0,4.0),pow(256.0,3.0),pow(256.0,2.0),pow(256.0,1.0));float decodeFromRGBA(in vec4 rgba,in float scale,in float off){vec4 integers=floor(255.0*rgba+0.5);return scale*dot(integers,1.0/bitPlaces)+off;}const float MAX_SPEED_1535977339=10000.0;attribute vec2 a_particleIndex;uniform sampler2D u_particleLongitudes;uniform sampler2D u_particleLatitudes;uniform sampler2D u_particleSpeeds;uniform float u_particleCountSqrt;uniform float u_canvasRatio;uniform float u_screenRatio;uniform float u_lon0;uniform float u_lat0;uniform float u_zoom;uniform int u_projection;uniform float u_size;varying float v_clip;varying float v_speed;const float PI_2=radians(90.0);const vec2 DIM=vec2(360.0,180.0);const vec2 DIM_2=vec2(180.0,90.0);void main(){vec2 displayCoord;vec2 lonLat0=radians(vec2(u_lon0,u_lat0));vec2 texCoord=a_particleIndex/u_particleCountSqrt;vec2 lonLat=radians(vec2(decodeFromRGBA(texture2D(u_particleLongitudes,texCoord),DIM.x,-DIM_2.x),decodeFromRGBA(texture2D(u_particleLatitudes,texCoord),DIM.y,-DIM_2.y)));v_speed=decodeFromRGBA(texture2D(u_particleSpeeds,texCoord),MAX_SPEED_1535977339,0.0);bool clip;forwardProject(displayCoord,lonLat0,lonLat,clip,u_zoom,u_projection);if(clip){v_clip=1.0;}else{v_clip=0.0;}displayCoord=u_zoom*displayCoord/PI_2;displayCoord.x=displayCoord.x/u_canvasRatio;gl_PointSize=u_size*u_zoom*u_screenRatio;gl_Position=vec4(displayCoord,0,1);}",yo]),texture:Ge(this._gl,[co,go])}}_createSimATexture(){let t={minMag:this._gl.NEAREST,width:Math.sqrt(this._count),height:Math.sqrt(this._count)};return{longitudes:le(this._gl,{src:Eo(xo(this._count),360,-180),...t}),latitudes:le(this._gl,{src:Eo(vo(this._count),180,-90),...t}),lifetimes:le(this._gl,{src:Eo(Lo(this._lifetime,this._count),this._lifetime,0),...t}),speeds:le(this._gl,t)}}_createSimBTexture(){let t={minMag:this._gl.NEAREST,width:Math.sqrt(this._count),height:Math.sqrt(this._count)};return{longitudes:le(this._gl,t),latitudes:le(this._gl,t),lifetimes:le(this._gl,t),speeds:le(this._gl,t)}}_createSimFramebuffers(){let t=Math.sqrt(this._count);return{simA:{longitudes:to(this._gl,[{attachment:this._textures.simA.longitudes}],t,t),latitudes:to(this._gl,[{attachment:this._textures.simA.latitudes}],t,t),lifetimes:to(this._gl,[{attachment:this._textures.simA.lifetimes}],t,t),speeds:to(this._gl,[{attachment:this._textures.simA.speeds}],t,t)},simB:{longitudes:to(this._gl,[{attachment:this._textures.simB.longitudes}],t,t),latitudes:to(this._gl,[{attachment:this._textures.simB.latitudes}],t,t),lifetimes:to(this._gl,[{attachment:this._textures.simB.lifetimes}],t,t),speeds:to(this._gl,[{attachment:this._textures.simB.speeds}],t,t)}}}}function Eo(t,e,o){let r=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let i=(t[n]-o)/e;r[n]=Math.round(Math.pow(256,4)*i)}return new Uint8Array(r.buffer)}class So{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let o=0;for(let r=0;r<this._n&&r<32;r++){const n=e[r],i=t+n,a=Math.abs(t)<Math.abs(n)?t-(i-n):n-(i-t);a&&(e[o++]=a),t=i}return e[o]=t,this._n=o+1,this}valueOf(){const t=this._partials;let e,o,r,n=this._n,i=0;if(n>0){for(i=t[--n];n>0&&(e=i,o=t[--n],i=e+o,r=o-(i-e),!r););n>0&&(r<0&&t[n-1]<0||r>0&&t[n-1]>0)&&(o=2*r,e=i+o,o==e-i&&(i=e))}return i}}function Io(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}var zo=1e-6,To=Math.PI,Do=To/2,Ro=To/4,Mo=2*To,jo=180/To,$o=To/180,Bo=Math.abs,Oo=Math.atan,ko=Math.atan2,No=Math.cos,Uo=Math.exp,Ho=Math.log,Go=Math.sin,Wo=Math.sign||function(t){return t>0?1:t<0?-1:0},Vo=Math.sqrt,qo=Math.tan;function Xo(t){return t>1?Do:t<-1?-Do:Math.asin(t)}function Yo(){}function Zo(t,e){t&&Qo.hasOwnProperty(t.type)&&Qo[t.type](t,e)}var Ko={Feature:function(t,e){Zo(t.geometry,e)},FeatureCollection:function(t,e){for(var o=t.features,r=-1,n=o.length;++r<n;)Zo(o[r].geometry,e)}},Qo={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var o=t.coordinates,r=-1,n=o.length;++r<n;)t=o[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Jo(t.coordinates,e,0)},MultiLineString:function(t,e){for(var o=t.coordinates,r=-1,n=o.length;++r<n;)Jo(o[r],e,0)},Polygon:function(t,e){tr(t.coordinates,e)},MultiPolygon:function(t,e){for(var o=t.coordinates,r=-1,n=o.length;++r<n;)tr(o[r],e)},GeometryCollection:function(t,e){for(var o=t.geometries,r=-1,n=o.length;++r<n;)Zo(o[r],e)}};function Jo(t,e,o){var r,n=-1,i=t.length-o;for(e.lineStart();++n<i;)r=t[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function tr(t,e){var o=-1,r=t.length;for(e.polygonStart();++o<r;)Jo(t[o],e,1);e.polygonEnd()}function er(t,e){t&&Ko.hasOwnProperty(t.type)?Ko[t.type](t,e):Zo(t,e)}function or(t){return[ko(t[1],t[0]),Xo(t[2])]}function rr(t){var e=t[0],o=t[1],r=No(o);return[r*No(e),r*Go(e),Go(o)]}function nr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ir(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ar(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function lr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function sr(t){var e=Vo(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function cr(t,e){function o(o,r){return o=t(o,r),e(o[0],o[1])}return t.invert&&e.invert&&(o.invert=function(o,r){return(o=e.invert(o,r))&&t.invert(o[0],o[1])}),o}function ur(t,e){return[Bo(t)>To?t+Math.round(-t/Mo)*Mo:t,e]}function fr(t,e,o){return(t%=Mo)?e||o?cr(hr(t),pr(e,o)):hr(t):e||o?pr(e,o):ur}function dr(t){return function(e,o){return[(e+=t)>To?e-Mo:e<-To?e+Mo:e,o]}}function hr(t){var e=dr(t);return e.invert=dr(-t),e}function pr(t,e){var o=No(t),r=Go(t),n=No(e),i=Go(e);function a(t,e){var a=No(e),l=No(t)*a,s=Go(t)*a,c=Go(e),u=c*o+l*r;return[ko(s*n-u*i,l*o-c*r),Xo(u*n+s*i)]}return a.invert=function(t,e){var a=No(e),l=No(t)*a,s=Go(t)*a,c=Go(e),u=c*n-s*i;return[ko(s*n+c*i,l*o+u*r),Xo(u*o-l*r)]},a}function mr(t,e){(e=rr(e))[0]-=t,sr(e);var o,r=(o=-e[1])>1?0:o<-1?To:Math.acos(o);return((-e[2]<0?-r:r)+Mo-zo)%Mo}function _r(){var t,e=[];return{point:function(e,o,r){t.push([e,o,r])},lineStart:function(){e.push(t=[])},lineEnd:Yo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var o=e;return e=[],t=null,o}}}function yr(t,e){return Bo(t[0]-e[0])<zo&&Bo(t[1]-e[1])<zo}function gr(t,e,o,r){this.x=t,this.z=e,this.o=o,this.e=r,this.v=!1,this.n=this.p=null}function xr(t,e,o,r,n){var i,a,l=[],s=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,o,r=t[0],a=t[e];if(yr(r,a)){if(!r[2]&&!a[2]){for(n.lineStart(),i=0;i<e;++i)n.point((r=t[i])[0],r[1]);return void n.lineEnd()}a[0]+=2e-6}l.push(o=new gr(r,t,null,!0)),s.push(o.o=new gr(r,null,o,!1)),l.push(o=new gr(a,t,null,!1)),s.push(o.o=new gr(a,null,o,!0))}})),l.length){for(s.sort(e),vr(l),vr(s),i=0,a=s.length;i<a;++i)s[i].e=o=!o;for(var c,u,f=l[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,n.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(i=0,a=c.length;i<a;++i)n.point((u=c[i])[0],u[1]);else r(d.x,d.n.x,1,n);d=d.n}else{if(h)for(c=d.p.z,i=c.length-1;i>=0;--i)n.point((u=c[i])[0],u[1]);else r(d.x,d.p.x,-1,n);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);n.lineEnd()}}}function vr(t){if(e=t.length){for(var e,o,r=0,n=t[0];++r<e;)n.n=o=t[r],o.p=n,n=o;n.n=o=t[0],o.p=n}}function Lr(t){return Bo(t[0])<=To?t[0]:Wo(t[0])*((Bo(t[0])+To)%Mo-To)}function br(t,e,o,r){return function(n){var i,a,l,s=e(n),c=_r(),u=e(c),f=!1,d={point:h,lineStart:m,lineEnd:_,polygonStart:function(){d.point=y,d.lineStart=g,d.lineEnd=x,a=[],i=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=_,a=Io(a);var t=function(t,e){var o=Lr(e),r=e[1],n=Go(r),i=[Go(o),-No(o),0],a=0,l=0,s=new So;1===n?r=Do+zo:-1===n&&(r=-Do-zo);for(var c=0,u=t.length;c<u;++c)if(d=(f=t[c]).length)for(var f,d,h=f[d-1],p=Lr(h),m=h[1]/2+Ro,_=Go(m),y=No(m),g=0;g<d;++g,p=v,_=b,y=P,h=x){var x=f[g],v=Lr(x),L=x[1]/2+Ro,b=Go(L),P=No(L),A=v-p,C=A>=0?1:-1,w=C*A,F=w>To,E=_*b;if(s.add(ko(E*C*Go(w),y*P+E*No(w))),a+=F?A+C*Mo:A,F^p>=o^v>=o){var S=ir(rr(h),rr(x));sr(S);var I=ir(i,S);sr(I);var z=(F^A>=0?-1:1)*Xo(I[2]);(r>z||r===z&&(S[0]||S[1]))&&(l+=F^A>=0?1:-1)}}return(a<-1e-6||a<zo&&s<-1e-12)^1&l}(i,r);a.length?(f||(n.polygonStart(),f=!0),xr(a,Ar,t,o,n)):t&&(f||(n.polygonStart(),f=!0),n.lineStart(),o(null,null,1,n),n.lineEnd()),f&&(n.polygonEnd(),f=!1),a=i=null},sphere:function(){n.polygonStart(),n.lineStart(),o(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function h(e,o){t(e,o)&&n.point(e,o)}function p(t,e){s.point(t,e)}function m(){d.point=p,s.lineStart()}function _(){d.point=h,s.lineEnd()}function y(t,e){l.push([t,e]),u.point(t,e)}function g(){u.lineStart(),l=[]}function x(){y(l[0][0],l[0][1]),u.lineEnd();var t,e,o,r,s=u.clean(),d=c.result(),h=d.length;if(l.pop(),i.push(l),l=null,h)if(1&s){if((e=(o=d[0]).length-1)>0){for(f||(n.polygonStart(),f=!0),n.lineStart(),t=0;t<e;++t)n.point((r=o[t])[0],r[1]);n.lineEnd()}}else h>1&&2&s&&d.push(d.pop().concat(d.shift())),a.push(d.filter(Pr))}return d}}function Pr(t){return t.length>1}function Ar(t,e){return((t=t.x)[0]<0?t[1]-Do-zo:Do-t[1])-((e=e.x)[0]<0?e[1]-Do-zo:Do-e[1])}ur.invert=ur;var Cr=br((function(){return!0}),(function(t){var e,o=NaN,r=NaN,n=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var l=i>0?To:-To,s=Bo(i-o);Bo(s-To)<zo?(t.point(o,r=(r+a)/2>0?Do:-Do),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(i,r),e=0):n!==l&&s>=To&&(Bo(o-n)<zo&&(o-=n*zo),Bo(i-l)<zo&&(i-=l*zo),r=function(t,e,o,r){var n,i,a=Go(t-o);return Bo(a)>zo?Oo((Go(e)*(i=No(r))*Go(o)-Go(r)*(n=No(e))*Go(t))/(n*i*a)):(e+r)/2}(o,r,i,a),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(l,r),e=0),t.point(o=i,r=a),n=l},lineEnd:function(){t.lineEnd(),o=r=NaN},clean:function(){return 2-e}}}),(function(t,e,o,r){var n;if(null==t)n=o*Do,r.point(-To,n),r.point(0,n),r.point(To,n),r.point(To,0),r.point(To,-n),r.point(0,-n),r.point(-To,-n),r.point(-To,0),r.point(-To,n);else if(Bo(t[0]-e[0])>zo){var i=t[0]<e[0]?To:-To;n=o*i/2,r.point(-i,n),r.point(0,n),r.point(i,n)}else r.point(e[0],e[1])}),[-To,-Do]);function wr(t){var e=No(t),o=6*$o,r=e>0,n=Bo(e)>zo;function i(t,o){return No(t)*No(o)>e}function a(t,o,r){var n=[1,0,0],i=ir(rr(t),rr(o)),a=nr(i,i),l=i[0],s=a-l*l;if(!s)return!r&&t;var c=e*a/s,u=-e*l/s,f=ir(n,i),d=lr(n,c);ar(d,lr(i,u));var h=f,p=nr(d,h),m=nr(h,h),_=p*p-m*(nr(d,d)-1);if(!(_<0)){var y=Vo(_),g=lr(h,(-p-y)/m);if(ar(g,d),g=or(g),!r)return g;var x,v=t[0],L=o[0],b=t[1],P=o[1];L<v&&(x=v,v=L,L=x);var A=L-v,C=Bo(A-To)<zo;if(!C&&P<b&&(x=b,b=P,P=x),C||A<zo?C?b+P>0^g[1]<(Bo(g[0]-v)<zo?b:P):b<=g[1]&&g[1]<=P:A>To^(v<=g[0]&&g[0]<=L)){var w=lr(h,(-p+y)/m);return ar(w,d),[g,or(w)]}}}function l(e,o){var n=r?t:To-t,i=0;return e<-n?i|=1:e>n&&(i|=2),o<-n?i|=4:o>n&&(i|=8),i}return br(i,(function(t){var e,o,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(f,d){var h,p=[f,d],m=i(f,d),_=r?m?0:l(f,d):m?l(f+(f<0?To:-To),d):0;if(!e&&(c=s=m)&&t.lineStart(),m!==s&&(!(h=a(e,p))||yr(e,h)||yr(p,h))&&(p[2]=1),m!==s)u=0,m?(t.lineStart(),h=a(p,e),t.point(h[0],h[1])):(h=a(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(n&&e&&r^m){var y;_&o||!(y=a(p,e,!0))||(u=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!m||e&&yr(e,p)||t.point(p[0],p[1]),e=p,s=m,o=_},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return u|(c&&s)<<1}}}),(function(e,r,n,i){!function(t,e,o,r,n,i){if(o){var a=No(e),l=Go(e),s=r*o;null==n?(n=e+r*Mo,i=e-s/2):(n=mr(a,n),i=mr(a,i),(r>0?n<i:n>i)&&(n+=r*Mo));for(var c,u=n;r>0?u>i:u<i;u-=s)c=or([a,-l*No(u),-l*Go(u)]),t.point(c[0],c[1])}}(i,t,o,n,e,r)}),r?[0,-t]:[-To,t-To])}var Fr=1e9,Er=-Fr;function Sr(t,e,o,r){function n(n,i){return t<=n&&n<=o&&e<=i&&i<=r}function i(n,i,l,c){var u=0,f=0;if(null==n||(u=a(n,l))!==(f=a(i,l))||s(n,i)<0^l>0)do{c.point(0===u||3===u?t:o,u>1?r:e)}while((u=(u+l+4)%4)!==f);else c.point(i[0],i[1])}function a(r,n){return Bo(r[0]-t)<zo?n>0?0:3:Bo(r[0]-o)<zo?n>0?2:1:Bo(r[1]-e)<zo?n>0?1:0:n>0?3:2}function l(t,e){return s(t.x,e.x)}function s(t,e){var o=a(t,1),r=a(e,1);return o!==r?o-r:0===o?e[1]-t[1]:1===o?t[0]-e[0]:2===o?t[1]-e[1]:e[0]-t[0]}return function(a){var s,c,u,f,d,h,p,m,_,y,g,x=a,v=_r(),L={point:b,lineStart:function(){L.point=P,c&&c.push(u=[]);y=!0,_=!1,p=m=NaN},lineEnd:function(){s&&(P(f,d),h&&_&&v.rejoin(),s.push(v.result()));L.point=b,_&&x.lineEnd()},polygonStart:function(){x=v,s=[],c=[],g=!0},polygonEnd:function(){var e=function(){for(var e=0,o=0,n=c.length;o<n;++o)for(var i,a,l=c[o],s=1,u=l.length,f=l[0],d=f[0],h=f[1];s<u;++s)i=d,a=h,d=(f=l[s])[0],h=f[1],a<=r?h>r&&(d-i)*(r-a)>(h-a)*(t-i)&&++e:h<=r&&(d-i)*(r-a)<(h-a)*(t-i)&&--e;return e}(),o=g&&e,n=(s=Io(s)).length;(o||n)&&(a.polygonStart(),o&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),n&&xr(s,l,e,i,a),a.polygonEnd());x=a,s=c=u=null}};function b(t,e){n(t,e)&&x.point(t,e)}function P(i,a){var l=n(i,a);if(c&&u.push([i,a]),y)f=i,d=a,h=l,y=!1,l&&(x.lineStart(),x.point(i,a));else if(l&&_)x.point(i,a);else{var s=[p=Math.max(Er,Math.min(Fr,p)),m=Math.max(Er,Math.min(Fr,m))],v=[i=Math.max(Er,Math.min(Fr,i)),a=Math.max(Er,Math.min(Fr,a))];!function(t,e,o,r,n,i){var a,l=t[0],s=t[1],c=0,u=1,f=e[0]-l,d=e[1]-s;if(a=o-l,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=n-l,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}if(a=r-s,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=l+c*f,t[1]=s+c*d),u<1&&(e[0]=l+u*f,e[1]=s+u*d),!0}}}}}(s,v,t,e,o,r)?l&&(x.lineStart(),x.point(i,a),g=!1):(_||(x.lineStart(),x.point(s[0],s[1])),x.point(v[0],v[1]),l||x.lineEnd(),g=!1)}p=i,m=a,_=l}return L}}var Ir,zr,Tr,Dr,Rr=t=>t,Mr=new So,jr=new So,$r={point:Yo,lineStart:Yo,lineEnd:Yo,polygonStart:function(){$r.lineStart=Br,$r.lineEnd=Nr},polygonEnd:function(){$r.lineStart=$r.lineEnd=$r.point=Yo,Mr.add(Bo(jr)),jr=new So},result:function(){var t=Mr/2;return Mr=new So,t}};function Br(){$r.point=Or}function Or(t,e){$r.point=kr,Ir=Tr=t,zr=Dr=e}function kr(t,e){jr.add(Dr*t-Tr*e),Tr=t,Dr=e}function Nr(){kr(Ir,zr)}var Ur=1/0,Hr=Ur,Gr=-Ur,Wr=Gr,Vr={point:function(t,e){t<Ur&&(Ur=t);t>Gr&&(Gr=t);e<Hr&&(Hr=e);e>Wr&&(Wr=e)},lineStart:Yo,lineEnd:Yo,polygonStart:Yo,polygonEnd:Yo,result:function(){var t=[[Ur,Hr],[Gr,Wr]];return Gr=Wr=-(Hr=Ur=1/0),t}};var qr,Xr,Yr,Zr,Kr=0,Qr=0,Jr=0,tn=0,en=0,on=0,rn=0,nn=0,an=0,ln={point:sn,lineStart:cn,lineEnd:dn,polygonStart:function(){ln.lineStart=hn,ln.lineEnd=pn},polygonEnd:function(){ln.point=sn,ln.lineStart=cn,ln.lineEnd=dn},result:function(){var t=an?[rn/an,nn/an]:on?[tn/on,en/on]:Jr?[Kr/Jr,Qr/Jr]:[NaN,NaN];return Kr=Qr=Jr=tn=en=on=rn=nn=an=0,t}};function sn(t,e){Kr+=t,Qr+=e,++Jr}function cn(){ln.point=un}function un(t,e){ln.point=fn,sn(Yr=t,Zr=e)}function fn(t,e){var o=t-Yr,r=e-Zr,n=Vo(o*o+r*r);tn+=n*(Yr+t)/2,en+=n*(Zr+e)/2,on+=n,sn(Yr=t,Zr=e)}function dn(){ln.point=sn}function hn(){ln.point=mn}function pn(){_n(qr,Xr)}function mn(t,e){ln.point=_n,sn(qr=Yr=t,Xr=Zr=e)}function _n(t,e){var o=t-Yr,r=e-Zr,n=Vo(o*o+r*r);tn+=n*(Yr+t)/2,en+=n*(Zr+e)/2,on+=n,rn+=(n=Zr*t-Yr*e)*(Yr+t),nn+=n*(Zr+e),an+=3*n,sn(Yr=t,Zr=e)}function yn(t){this._context=t}yn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Mo)}},result:Yo};var gn,xn,vn,Ln,bn,Pn=new So,An={point:Yo,lineStart:function(){An.point=Cn},lineEnd:function(){gn&&wn(xn,vn),An.point=Yo},polygonStart:function(){gn=!0},polygonEnd:function(){gn=null},result:function(){var t=+Pn;return Pn=new So,t}};function Cn(t,e){An.point=wn,xn=Ln=t,vn=bn=e}function wn(t,e){Ln-=t,bn-=e,Pn.add(Vo(Ln*Ln+bn*bn)),Ln=t,bn=e}function Fn(){this._string=[]}function En(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Sn(t){return function(e){var o=new In;for(var r in t)o[r]=t[r];return o.stream=e,o}}function In(){}function zn(t,e,o){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),er(o,t.stream(Vr)),e(Vr.result()),null!=r&&t.clipExtent(r),t}function Tn(t,e,o){return zn(t,(function(o){var r=e[1][0]-e[0][0],n=e[1][1]-e[0][1],i=Math.min(r/(o[1][0]-o[0][0]),n/(o[1][1]-o[0][1])),a=+e[0][0]+(r-i*(o[1][0]+o[0][0]))/2,l=+e[0][1]+(n-i*(o[1][1]+o[0][1]))/2;t.scale(150*i).translate([a,l])}),o)}Fn.prototype={_radius:4.5,_circle:En(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=En(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},In.prototype={constructor:In,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Dn=No(30*$o);function Rn(t,e){return+e?function(t,e){function o(r,n,i,a,l,s,c,u,f,d,h,p,m,_){var y=c-r,g=u-n,x=y*y+g*g;if(x>4*e&&m--){var v=a+d,L=l+h,b=s+p,P=Vo(v*v+L*L+b*b),A=Xo(b/=P),C=Bo(Bo(b)-1)<zo||Bo(i-f)<zo?(i+f)/2:ko(L,v),w=t(C,A),F=w[0],E=w[1],S=F-r,I=E-n,z=g*S-y*I;(z*z/x>e||Bo((y*S+g*I)/x-.5)>.3||a*d+l*h+s*p<Dn)&&(o(r,n,i,a,l,s,F,E,C,v/=P,L/=P,b,m,_),_.point(F,E),o(F,E,C,v,L,b,c,u,f,d,h,p,m,_))}}return function(e){var r,n,i,a,l,s,c,u,f,d,h,p,m={point:_,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=v},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function _(o,r){o=t(o,r),e.point(o[0],o[1])}function y(){u=NaN,m.point=g,e.lineStart()}function g(r,n){var i=rr([r,n]),a=t(r,n);o(u,f,c,d,h,p,u=a[0],f=a[1],c=r,d=i[0],h=i[1],p=i[2],16,e),e.point(u,f)}function x(){m.point=_,e.lineEnd()}function v(){y(),m.point=L,m.lineEnd=b}function L(t,e){g(r=t,e),n=u,i=f,a=d,l=h,s=p,m.point=g}function b(){o(u,f,c,d,h,p,n,i,r,a,l,s,16,e),m.lineEnd=x,x()}return m}}(t,e):function(t){return Sn({point:function(e,o){e=t(e,o),this.stream.point(e[0],e[1])}})}(t)}var Mn=Sn({point:function(t,e){this.stream.point(t*$o,e*$o)}});function jn(t,e,o,r,n,i){if(!i)return function(t,e,o,r,n){function i(i,a){return[e+t*(i*=r),o-t*(a*=n)]}return i.invert=function(i,a){return[(i-e)/t*r,(o-a)/t*n]},i}(t,e,o,r,n);var a=No(i),l=Go(i),s=a*t,c=l*t,u=a/t,f=l/t,d=(l*o-a*e)/t,h=(l*e+a*o)/t;function p(t,i){return[s*(t*=r)-c*(i*=n)+e,o-c*t-s*i]}return p.invert=function(t,e){return[r*(u*t-f*e+d),n*(h-f*t-u*e)]},p}function $n(t){return Bn((function(){return t}))()}function Bn(t){var e,o,r,n,i,a,l,s,c,u,f=150,d=480,h=250,p=0,m=0,_=0,y=0,g=0,x=0,v=1,L=1,b=null,P=Cr,A=null,C=Rr,w=.5;function F(t){return s(t[0]*$o,t[1]*$o)}function E(t){return(t=s.invert(t[0],t[1]))&&[t[0]*jo,t[1]*jo]}function S(){var t=jn(f,0,0,v,L,x).apply(null,e(p,m)),r=jn(f,d-t[0],h-t[1],v,L,x);return o=fr(_,y,g),l=cr(e,r),s=cr(o,l),a=Rn(l,w),I()}function I(){return c=u=null,F}return F.stream=function(t){return c&&u===t?c:c=Mn(function(t){return Sn({point:function(e,o){var r=t(e,o);return this.stream.point(r[0],r[1])}})}(o)(P(a(C(u=t)))))},F.preclip=function(t){return arguments.length?(P=t,b=void 0,I()):P},F.postclip=function(t){return arguments.length?(C=t,A=r=n=i=null,I()):C},F.clipAngle=function(t){return arguments.length?(P=+t?wr(b=t*$o):(b=null,Cr),I()):b*jo},F.clipExtent=function(t){return arguments.length?(C=null==t?(A=r=n=i=null,Rr):Sr(A=+t[0][0],r=+t[0][1],n=+t[1][0],i=+t[1][1]),I()):null==A?null:[[A,r],[n,i]]},F.scale=function(t){return arguments.length?(f=+t,S()):f},F.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],S()):[d,h]},F.center=function(t){return arguments.length?(p=t[0]%360*$o,m=t[1]%360*$o,S()):[p*jo,m*jo]},F.rotate=function(t){return arguments.length?(_=t[0]%360*$o,y=t[1]%360*$o,g=t.length>2?t[2]%360*$o:0,S()):[_*jo,y*jo,g*jo]},F.angle=function(t){return arguments.length?(x=t%360*$o,S()):x*jo},F.reflectX=function(t){return arguments.length?(v=t?-1:1,S()):v<0},F.reflectY=function(t){return arguments.length?(L=t?-1:1,S()):L<0},F.precision=function(t){return arguments.length?(a=Rn(l,w=t*t),I()):Vo(w)},F.fitExtent=function(t,e){return Tn(F,t,e)},F.fitSize=function(t,e){return function(t,e,o){return Tn(t,[[0,0],e],o)}(F,t,e)},F.fitWidth=function(t,e){return function(t,e,o){return zn(t,(function(o){var r=+e,n=r/(o[1][0]-o[0][0]),i=(r-n*(o[1][0]+o[0][0]))/2,a=-n*o[0][1];t.scale(150*n).translate([i,a])}),o)}(F,t,e)},F.fitHeight=function(t,e){return function(t,e,o){return zn(t,(function(o){var r=+e,n=r/(o[1][1]-o[0][1]),i=-n*o[0][0],a=(r-n*(o[1][1]+o[0][1]))/2;t.scale(150*n).translate([i,a])}),o)}(F,t,e)},function(){return e=t.apply(this,arguments),F.invert=e.invert&&E,S()}}function On(t){return function(e,o){var r=Vo(e*e+o*o),n=t(r),i=Go(n),a=No(n);return[ko(e*i,r*a),Xo(r&&o*i/r)]}}function kn(t,e){return[t,Ho(qo((Do+e)/2))]}function Nn(t,e){return[t,e]}kn.invert=function(t,e){return[t,2*Oo(Uo(e))-Do]},Nn.invert=Nn;var Un=1.340264,Hn=-.081106,Gn=893e-6,Wn=.003796,Vn=Vo(3)/2;function qn(t,e){var o=Xo(Vn*Go(e)),r=o*o,n=r*r*r;return[t*No(o)/(Vn*(Un+3*Hn*r+n*(7*Gn+9*Wn*r))),o*(Un+Hn*r+n*(Gn+Wn*r))]}function Xn(t,e){return[No(e)*Go(t),Go(e)]}function Yn(t,e){var o=No(e),r=1+No(t)*o;return[o*Go(t)/r,Go(e)/r]}qn.invert=function(t,e){for(var o,r=e,n=r*r,i=n*n*n,a=0;a<12&&(i=(n=(r-=o=(r*(Un+Hn*n+i*(Gn+Wn*n))-e)/(Un+3*Hn*n+i*(7*Gn+9*Wn*n)))*r)*n*n,!(Bo(o)<1e-12));++a);return[Vn*t*(Un+3*Hn*n+i*(7*Gn+9*Wn*n))/No(r),Xo(Go(r)/Vn)]},Xn.invert=On(Xo),Yn.invert=On((function(t){return 2*Oo(t)}));var Zn=Math.atan2,Kn=Math.cos,Qn=Math.sin,Jn=1e-6,ti=Math.PI,ei=ti/2,oi=180/ti,ri=ti/180;function ni(t){return t>1?ei:t<-1?-ei:Math.asin(t)}function ii(t){return t>1?0:t<-1?ti:Math.acos(t)}function ai(t){return t>0?Math.sqrt(t):0}function li(t,e){var o=function(t){function e(e,o){var r=Kn(o),n=(t-1)/(t-r*Kn(e));return[n*r*Qn(e),n*Qn(o)]}return e.invert=function(e,o){var r=e*e+o*o,n=ai(r),i=(t-ai(1-r*(t+1)/(t-1)))/((t-1)/n+n/(t-1));return[Zn(e*i,n*ai(1-i*i)),n?ni(o*i/n):0]},e}(t);if(!e)return o;var r=Kn(e),n=Qn(e);function i(e,i){var a=o(e,i),l=a[1],s=l*n/(t-1)+r;return[a[0]*r/s,l/s]}return i.invert=function(e,i){var a=(t-1)/(t-1-i*n);return o.invert(a*e,a*i*r)},i}var si,ci,ui,fi,di=Object.freeze({EQUIRECTANGULAR:{name:"equirectangular",id:0,function:$n(Nn).scale(152.63)},MERCATOR:{name:"Mercator",id:1,function:function(t){var e,o,r,n=$n(t),i=n.center,a=n.scale,l=n.translate,s=n.clipExtent,c=null;function u(){var i=To*a(),l=n(function(t){function e(e){return(e=t(e[0]*$o,e[1]*$o))[0]*=jo,e[1]*=jo,e}return t=fr(t[0]*$o,t[1]*$o,t.length>2?t[2]*$o:0),e.invert=function(e){return(e=t.invert(e[0]*$o,e[1]*$o))[0]*=jo,e[1]*=jo,e},e}(n.rotate()).invert([0,0]));return s(null==c?[[l[0]-i,l[1]-i],[l[0]+i,l[1]+i]]:t===kn?[[Math.max(l[0]-i,c),e],[Math.min(l[0]+i,o),r]]:[[c,Math.max(l[1]-i,e)],[o,Math.min(l[1]+i,r)]])}return n.scale=function(t){return arguments.length?(a(t),u()):a()},n.translate=function(t){return arguments.length?(l(t),u()):l()},n.center=function(t){return arguments.length?(i(t),u()):i()},n.clipExtent=function(t){return arguments.length?(null==t?c=e=o=r=null:(c=+t[0][0],e=+t[0][1],o=+t[1][0],r=+t[1][1]),u()):null==c?null:[[c,e],[o,r]]},u()}(kn).scale(961/Mo)},EQUAL_EARTH:{name:"Equal Earth",id:2,function:$n(qn).scale(177.158)},ORTHOGRAPHIC:{name:"orthographic",id:3,function:$n(Xn).scale(249.5).clipAngle(90.000001)},VERTICAL_PERSPECTIVE:{name:"vertical perspective",id:4,function:(si=2,ci=0,ui=Bn(li),fi=ui(si,ci),fi.distance=function(t){return arguments.length?ui(si=+t,ci).clipAngle(ii(1/si)*oi-Jn):si},fi.tilt=function(t){return arguments.length?ui(si,ci=t*ri):ci*oi},fi.scale(432.147).clipAngle(ii(1/si)*oi-Jn))},STEREOGRAPHIC:{name:"stereographic",id:5,function:$n(Yn).scale(250).clipAngle(142).clipAngle(null),particleSizeFactor:.5}});function hi(t,e){return!function(t,e){var o,r,n=4.5;function i(t){return t&&("function"==typeof n&&r.pointRadius(+n.apply(this,arguments)),er(t,o(r))),r.result()}return i.area=function(t){return er(t,o($r)),$r.result()},i.measure=function(t){return er(t,o(An)),An.result()},i.bounds=function(t){return er(t,o(Vr)),Vr.result()},i.centroid=function(t){return er(t,o(ln)),ln.result()},i.projection=function(e){return arguments.length?(o=null==e?(t=null,Rr):(t=e).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(e=null,new Fn):new yn(e=t),"function"!=typeof n&&r.pointRadius(n),i):e},i.pointRadius=function(t){return arguments.length?(n="function"==typeof t?t:(r.pointRadius(+t),+t),i):n},i.projection(t).context(e)}(t)({type:"Point",coordinates:e})}var pi=Object.freeze({GFS:{id:0,function:(t,e)=>{const o=t.width/360,r=(t.height-1)/180,n=Math.round((e[0]+360)*o)%t.width;return Math.round((e[1]+90)*r)*t.width+n}},RTGSSTHR:{id:1,function:(t,e)=>{const o=t.width/360,r=t.height/180,n=Math.floor((e[0]+360)*o)%t.width;return Math.min(Math.floor((e[1]+90)*r),t.height-1)*t.width+n}},OSCAR:{id:2,function:(t,e)=>{const o=(t.width-1)/400,r=(t.height-1)/160,n=Math.round((e[0]+340)*o)%(360*o);return Math.round((80-e[1])*r)*t.width+n}},GEOS:{id:3,function:(t,e)=>{const o=t.width/360,r=(t.height-1)/180,n=Math.round((e[0]+540)*o)%t.width;return Math.round((e[1]+90)*r)*t.width+n}}});const mi=new ArrayBuffer(4),_i=new Float32Array(mi),yi=new Uint32Array(mi),gi=new Uint32Array(512),xi=new Uint32Array(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(gi[0|t]=0,gi[256|t]=32768,xi[0|t]=24,xi[256|t]=24):e<-14?(gi[0|t]=1024>>-e-14,gi[256|t]=1024>>-e-14|32768,xi[0|t]=-e-1,xi[256|t]=-e-1):e<=15?(gi[0|t]=e+15<<10,gi[256|t]=e+15<<10|32768,xi[0|t]=13,xi[256|t]=13):e<128?(gi[0|t]=31744,gi[256|t]=64512,xi[0|t]=24,xi[256|t]=24):(gi[0|t]=31744,gi[256|t]=64512,xi[0|t]=13,xi[256|t]=13)}function vi(t){_i[0]=t;const e=yi[0],o=e>>23&511;return gi[o]+((8388607&e)>>xi[o])}const Li=new Uint32Array(2048),bi=new Uint32Array(64),Pi=new Uint32Array(64);Li[0]=0;for(let t=1;t<1024;++t){let e=t<<13,o=0;for(;0==(8388608&e);)o-=8388608,e<<=1;e&=-8388609,o+=947912704,Li[t]=e|o}for(let t=1024;t<2048;++t)Li[t]=939524096+(t-1024<<13);bi[0]=0;for(let t=1;t<31;++t)bi[t]=t<<23;bi[31]=1199570944,bi[32]=2147483648;for(let t=33;t<63;++t)bi[t]=2147483648+(t-32<<23);bi[63]=3347054592,Pi[0]=0;for(let t=1;t<64;++t)Pi[t]=32===t?0:1024;function Ai(t){const e=t>>10;return yi[0]=Li[Pi[e]+(1023&t)]+bi[e],_i[0]}var Ci="object"==typeof global&&global&&global.Object===Object&&global,wi="object"==typeof self&&self&&self.Object===Object&&self,Fi=Ci||wi||Function("return this")(),Ei=Fi.Symbol,Si=Object.prototype,Ii=Si.hasOwnProperty,zi=Si.toString,Ti=Ei?Ei.toStringTag:void 0;var Di=Object.prototype.toString;var Ri=Ei?Ei.toStringTag:void 0;function Mi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ri&&Ri in Object(t)?function(t){var e=Ii.call(t,Ti),o=t[Ti];try{t[Ti]=void 0;var r=!0}catch(t){}var n=zi.call(t);return r&&(e?t[Ti]=o:delete t[Ti]),n}(t):function(t){return Di.call(t)}(t)}function ji(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var $i,Bi=Fi["__core-js_shared__"],Oi=($i=/[^.]+$/.exec(Bi&&Bi.keys&&Bi.keys.IE_PROTO||""))?"Symbol(src)_1."+$i:"";var ki=Function.prototype.toString;var Ni=/^\[object .+?Constructor\]$/,Ui=Function.prototype,Hi=Object.prototype,Gi=Ui.toString,Wi=Hi.hasOwnProperty,Vi=RegExp("^"+Gi.call(Wi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qi(t){return!(!ji(t)||(e=t,Oi&&Oi in e))&&(function(t){if(!ji(t))return!1;var e=Mi(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)?Vi:Ni).test(function(t){if(null!=t){try{return ki.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function Xi(t,e){var o=function(t,e){return null==t?void 0:t[e]}(t,e);return qi(o)?o:void 0}var Yi=Xi(Object,"create");var Zi=Object.prototype.hasOwnProperty;var Ki=Object.prototype.hasOwnProperty;function Qi(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var r=t[e];this.set(r[0],r[1])}}function Ji(t,e){for(var o,r,n=t.length;n--;)if((o=t[n][0])===(r=e)||o!=o&&r!=r)return n;return-1}Qi.prototype.clear=function(){this.__data__=Yi?Yi(null):{},this.size=0},Qi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Qi.prototype.get=function(t){var e=this.__data__;if(Yi){var o=e[t];return"__lodash_hash_undefined__"===o?void 0:o}return Zi.call(e,t)?e[t]:void 0},Qi.prototype.has=function(t){var e=this.__data__;return Yi?void 0!==e[t]:Ki.call(e,t)},Qi.prototype.set=function(t,e){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=Yi&&void 0===e?"__lodash_hash_undefined__":e,this};var ta=Array.prototype.splice;function ea(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var r=t[e];this.set(r[0],r[1])}}ea.prototype.clear=function(){this.__data__=[],this.size=0},ea.prototype.delete=function(t){var e=this.__data__,o=Ji(e,t);return!(o<0)&&(o==e.length-1?e.pop():ta.call(e,o,1),--this.size,!0)},ea.prototype.get=function(t){var e=this.__data__,o=Ji(e,t);return o<0?void 0:e[o][1]},ea.prototype.has=function(t){return Ji(this.__data__,t)>-1},ea.prototype.set=function(t,e){var o=this.__data__,r=Ji(o,t);return r<0?(++this.size,o.push([t,e])):o[r][1]=e,this};var oa=Xi(Fi,"Map");function ra(t,e){var o,r,n=t.__data__;return("string"==(r=typeof(o=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==o:null===o)?n["string"==typeof e?"string":"hash"]:n.map}function na(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var r=t[e];this.set(r[0],r[1])}}na.prototype.clear=function(){this.size=0,this.__data__={hash:new Qi,map:new(oa||ea),string:new Qi}},na.prototype.delete=function(t){var e=ra(this,t).delete(t);return this.size-=e?1:0,e},na.prototype.get=function(t){return ra(this,t).get(t)},na.prototype.has=function(t){return ra(this,t).has(t)},na.prototype.set=function(t,e){var o=ra(this,t),r=o.size;return o.set(t,e),this.size+=o.size==r?0:1,this};function ia(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var o=function(){var r=arguments,n=e?e.apply(this,r):r[0],i=o.cache;if(i.has(n))return i.get(n);var a=t.apply(this,r);return o.cache=i.set(n,a)||i,a};return o.cache=new(ia.Cache||na),o}ia.Cache=na;const aa=Object.getOwnPropertyDescriptor(new Uint8Array(1),0).writable;function la(t){let e="number"!=typeof t?Number(t):t;return Number.isNaN(e)&&(e=0),Math.trunc(e)}function sa(t,e){const[o,r]=[Number.isNaN(t),Number.isNaN(e)];if(o&&r)return 0;if(o)return 1;if(r)return-1;if(t<e)return-1;if(t>e)return 1;if(0===t&&0===e){const[o,r]=[Object.is(t,0),Object.is(e,0)];if(!o&&r)return-1;if(o&&!r)return 1}return 0}var ca,ua="object"==typeof exports&&exports&&!exports.nodeType&&exports,fa=ua&&"object"==typeof module&&module&&!module.nodeType&&module,da=fa&&fa.exports===ua&&Ci.process,ha=function(){try{var t=fa&&fa.require&&fa.require("util").types;return t||da&&da.binding&&da.binding("util")}catch(t){}}(),pa=ha&&ha.isArrayBuffer,ma=pa?(ca=pa,function(t){return ca(t)}):function(t){return function(t){return null!=t&&"object"==typeof t}(t)&&"[object ArrayBuffer]"==Mi(t)};function _a(t){return"string"==typeof t&&t===la(t)+""}const ya=function(){const t=new WeakMap;return e=>{let o=t.get(e);return o||(o=Object.create(null),t.set(e,o),o)}}();function ga(t){return t instanceof Pa}function xa(t){if(!ga(t))throw new TypeError("This is not a Float16Array")}function va(t){const e=t.length,o=new Array(e);for(let r=0;r<e;++r)o[r]=Ai(t[r]);return o}const La={apply(t,e,o){return ga(e)&&("function"==typeof(r=t)&&Ca.has(r))?Reflect.apply(t,ya(e).target,o):Reflect.apply(t,e,o);var r}},ba={get(t,e){let o=null;if(aa||(o=t,t=ya(o).target),_a(e))return Reflect.has(t,e)?Ai(Reflect.get(t,e)):void 0;{const r=null!==o&&Reflect.has(o,e)?Reflect.get(o,e):Reflect.get(t,e);if("function"!=typeof r)return r;let n=ya(r).proxy;return void 0===n&&(n=ya(r).proxy=new Proxy(r,La)),n}},set(t,e,o){let r=null;return aa||(r=t,t=ya(r).target),_a(e)?Reflect.set(t,e,vi(o)):null===r||Reflect.has(t,e)&&!Object.isFrozen(r)?Reflect.set(t,e,o):Reflect.set(r,e,o)}};aa||(ba.getPrototypeOf=t=>Reflect.getPrototypeOf(ya(t).target),ba.setPrototypeOf=(t,e)=>Reflect.setPrototypeOf(ya(t).target,e),ba.defineProperty=(t,e,o)=>{const r=ya(t).target;return!Reflect.has(r,e)||Object.isFrozen(t)?Reflect.defineProperty(t,e,o):Reflect.defineProperty(r,e,o)},ba.deleteProperty=(t,e)=>{const o=ya(t).target;return Reflect.has(t,e)?Reflect.deleteProperty(t,e):Reflect.deleteProperty(o,e)},ba.has=(t,e)=>Reflect.has(t,e)||Reflect.has(ya(t).target,e),ba.isExtensible=t=>Reflect.isExtensible(t),ba.preventExtensions=t=>Reflect.preventExtensions(t),ba.getOwnPropertyDescriptor=(t,e)=>Reflect.getOwnPropertyDescriptor(t,e),ba.ownKeys=t=>Reflect.ownKeys(t));class Pa extends Uint16Array{constructor(t,e,o){if(ga(t))super(ya(t).target);else if(null===t||"object"!=typeof t||ma(t))switch(arguments.length){case 0:super();break;case 1:super(t);break;case 2:super(t,e);break;case 3:super(t,e,o);break;default:super(...arguments)}else{const e=Reflect.has(t,"length")||void 0===t[Symbol.iterator]?t:[...t],o=e.length;super(o);for(let t=0;t<o;++t)this[t]=vi(e[t])}let r;if(aa)r=new Proxy(this,ba);else{const t=Object.create(null);ya(t).target=this,r=new Proxy(t,ba)}return ya(r).target=this,ya(this).proxy=r,r}static from(t,...e){if(0===e.length)return new Pa(Uint16Array.from(t,vi).buffer);const o=e[0],r=e[1];return new Pa(Uint16Array.from(t,(function(t,...e){return vi(o.call(this,t,...e))}),r).buffer)}static of(...t){return new Pa(t)}*[Symbol.iterator](){for(const t of super[Symbol.iterator]())yield Ai(t)}keys(){return super.keys()}*values(){for(const t of super.values())yield Ai(t)}*entries(){for(const[t,e]of super.entries())yield[t,Ai(e)]}map(t,...e){xa(this);const o=e[0],r=[];for(let e=0,n=this.length;e<n;++e){const n=Ai(this[e]);r.push(t.call(o,n,e,ya(this).proxy))}return new Pa(r)}filter(t,...e){xa(this);const o=e[0],r=[];for(let e=0,n=this.length;e<n;++e){const n=Ai(this[e]);t.call(o,n,e,ya(this).proxy)&&r.push(n)}return new Pa(r)}reduce(t,...e){let o,r;xa(this),0===e.length?(o=Ai(this[0]),r=1):(o=e[0],r=0);for(let e=r,n=this.length;e<n;++e)o=t(o,Ai(this[e]),e,ya(this).proxy);return o}reduceRight(t,...e){let o,r;xa(this);const n=this.length;0===e.length?(o=Ai(this[n-1]),r=n-1):(o=e[0],r=n);for(let e=r;e--;)o=t(o,Ai(this[e]),e,ya(this).proxy);return o}forEach(t,...e){xa(this);const o=e[0];for(let e=0,r=this.length;e<r;++e)t.call(o,Ai(this[e]),e,ya(this).proxy)}find(t,...e){xa(this);const o=e[0];for(let e=0,r=this.length;e<r;++e){const r=Ai(this[e]);if(t.call(o,r,e,ya(this).proxy))return r}}findIndex(t,...e){xa(this);const o=e[0];for(let e=0,r=this.length;e<r;++e){const r=Ai(this[e]);if(t.call(o,r,e,ya(this).proxy))return e}return-1}every(t,...e){xa(this);const o=e[0];for(let e=0,r=this.length;e<r;++e)if(!t.call(o,Ai(this[e]),e,ya(this).proxy))return!1;return!0}some(t,...e){xa(this);const o=e[0];for(let e=0,r=this.length;e<r;++e)if(t.call(o,Ai(this[e]),e,ya(this).proxy))return!0;return!1}set(t,...e){xa(this);const o=e[0];let r;if(ga(t))r=ya(t).target;else{const e=Reflect.has(t,"length")||void 0===t[Symbol.iterator]?t:[...t],o=e.length;r=new Uint16Array(o);for(let t=0,o=e.length;t<o;++t)r[t]=vi(e[t])}super.set(r,o)}reverse(){return xa(this),super.reverse(),ya(this).proxy}fill(t,...e){return xa(this),super.fill(vi(t),...e),ya(this).proxy}copyWithin(t,e,...o){return xa(this),super.copyWithin(t,e,...o),ya(this).proxy}sort(...t){xa(this);let e=t[0];void 0===e&&(e=sa);const o=ia(Ai);return super.sort(((t,r)=>e(o(t),o(r)))),ya(this).proxy}slice(...t){let e;xa(this);try{e=super.slice(...t)}catch(o){if(!(o instanceof TypeError))throw o;e=new Uint16Array(this.buffer,this.byteOffset,this.length).slice(...t)}return new Pa(e.buffer)}subarray(...t){let e;xa(this);try{e=super.subarray(...t)}catch(o){if(!(o instanceof TypeError))throw o;e=new Uint16Array(this.buffer,this.byteOffset,this.length).subarray(...t)}return new Pa(e.buffer,e.byteOffset,e.length)}indexOf(t,...e){xa(this);const o=this.length;let r=la(e[0]);r<0&&(r+=o,r<0&&(r=0));for(let e=r,n=o;e<n;++e)if(Ai(this[e])===t)return e;return-1}lastIndexOf(t,...e){xa(this);const o=this.length;let r=la(e[0]);r=0===r?o:r+1,r>=0?r=r<o?r:o:r+=o;for(let e=r;e--;)if(Ai(this[e])===t)return e;return-1}includes(t,...e){xa(this);const o=this.length;let r=la(e[0]);r<0&&(r+=o,r<0&&(r=0));const n=Number.isNaN(t);for(let e=r,i=o;e<i;++e){const o=Ai(this[e]);if(n&&Number.isNaN(o))return!0;if(o===t)return!0}return!1}join(...t){xa(this);return va(this).join(...t)}toLocaleString(...t){xa(this);return va(this).toLocaleString(...t)}get[Symbol.toStringTag](){if(ga(this))return"Float16Array"}}const Aa=Pa.prototype,Ca=new WeakSet;for(const t of Reflect.ownKeys(Aa)){const e=Aa[t];"function"==typeof e&&Ca.add(e)}function wa(e){let o,r,n,i,a,l,s,m,_,y,g,x;return{c(){o=d("div"),r=d("canvas"),n=h(),i=d("canvas"),a=h(),l=d("slot"),s=h(),m=d("canvas"),_=h(),y=d("canvas"),g=h(),x=d("slot"),this.c=t,r.hidden=!0,i.hidden=!0,p(l,"name","background"),p(o,"class","layers")},m(t,f){u(t,o,f),c(o,r),e[34](r),c(o,n),c(o,i),e[35](i),c(o,a),c(o,l),c(o,s),c(o,m),e[36](m),c(o,_),c(o,y),e[37](y),c(o,g),c(o,x)},p:t,i:t,o:t,d(t){t&&f(o),e[34](null),e[35](null),e[36](null),e[37](null)}}}function Fa(t,e,o){let r,n,i,a,l,s,c,u,f,d,h,p,m,_,{centerLongitude:g=0}=e,{centerLatitude:v=0}=e,{zoom:L=1}=e,{portraitBasedZoom:b=!1}=e,{projection:P=di.VERTICAL_PERSPECTIVE}=e,{griddedData:A={floatArray:new Pa([-1/0]),width:1,height:1,projection:pi.GFS}}=e,{griddedColormap:C={lut:[[0,0,0],[127,127,127]]}}=e,{griddedDomain:w=[0,1]}=e,{griddedScale:F="linear"}=e,{griddedBaseColor:E=[38,38,38,1]}=e,{particleData:S={uVelocities:new Pa([0]),vVelocities:new Pa([0]),width:1,height:1,projection:pi.GFS}}=e,{particlesShown:I=!1}=e,{particlesPaused:z=!1}=e,{particleLifetime:T=1e3}=e,{particleCount:D=1e5}=e,{particleDisplay:R={size:.8,rate:5e4,opacity:.4,opacitySpeedDecay:.8,fade:.96}}=e,{vectorData:M={objects:{}}}=e,{vectorColors:j={}}=e,$=P.function,{forwardProjectionFunction:B}=e,{inverseProjectionFunction:O}=e,{syncWithAnimationHook:k=(()=>{})}=e,{canvasRatio:N=1}=e,{MAX_TEXTURE_SIZE:U=1/0}=e,H={},G={},W=!1;y((()=>{const t=null===l.getContext("webgl",{failIfMajorPerformanceCaveat:!0});l.remove();const e=null!==s.getContext("webgl2"),r=e?"webgl2":"webgl";s.remove(),d=c.getContext(r,{alpha:!0}),h=u.getContext(r,{premultipliedAlpha:!t}),o(7,U=d.getParameter(d.MAX_TEXTURE_SIZE)),H=new po(d,{data:A,colormap:C,domain:w,scale:F,baseColor:E,vectorData:M,webgl2:e});let n={count:D,lifetime:T,data:S,majorPerformanceCaveat:t,webgl2:e},i=h.getExtension("EXT_color_buffer_float")||h.getExtension("WEBGL_color_buffer_float");G=!i||navigator.userAgent.includes("Mobi")?new Fo(h,n):new bo(h,n),K(d,!0),K(h,!0),requestAnimationFrame(Z)}));let V,q,X,Y=!1;function Z(t){if(!c)return;let e=_?t-_:0;_=t,o(29,n=c.clientWidth),o(30,i=c.clientHeight),o(6,N=n/i);let r=window.devicePixelRatio,l=(b?N:1)*L,s={u_canvasRatio:N,u_screenRatio:r*i/1080,u_zoom:l,u_griddedDataProjection:A.projection.id,u_particleDataProjection:S.projection.id,...f};n!==V||i!==q||r!==X?(p=!0,m=!0,Y=!0):Y&&(Y=!1,K(d),K(h)),V=n,q=i,X=r,a&&(o(31,$=function(t,e,o,r,n,i){let a=t.function.scale(n*i/Math.PI).translate([r/2,n/2]).rotate([-e,-o,0]);return 4===t.id&&(a=a.distance(1+7/i)),a}(P,g,v,n,i,l)),a=!1),p&&(H.drawGriddedData(s),H.drawVectorData(s,j),k(),p=!1),I&&(m&&G.resetTrails(),(!z||z&&m)&&G.drawWithTrails(s,R.size*(P.particleSizeFactor||1),R.opacity,R.opacitySpeedDecay,R.fade),z||G.step(s,Math.min(e,100),R.rate),m&&(m=!1)),W&&(h.clear(h.COLOR_BUFFER_BIT),W=!1),requestAnimationFrame(Z)}function K(t,e){const o=window.devicePixelRatio;(function(t,e){e=e||1,e=Math.max(0,e);const o=t.clientWidth*e|0,r=t.clientHeight*e|0;return(t.width!==o||t.height!==r)&&(t.width=o,t.height=r,!0)}(t.canvas,o)||e)&&(t.viewport(0,0,t.canvas.width,t.canvas.height),p=!0,m=!0)}return t.$$set=t=>{"centerLongitude"in t&&o(10,g=t.centerLongitude),"centerLatitude"in t&&o(11,v=t.centerLatitude),"zoom"in t&&o(12,L=t.zoom),"portraitBasedZoom"in t&&o(13,b=t.portraitBasedZoom),"projection"in t&&o(14,P=t.projection),"griddedData"in t&&o(15,A=t.griddedData),"griddedColormap"in t&&o(16,C=t.griddedColormap),"griddedDomain"in t&&o(17,w=t.griddedDomain),"griddedScale"in t&&o(18,F=t.griddedScale),"griddedBaseColor"in t&&o(19,E=t.griddedBaseColor),"particleData"in t&&o(20,S=t.particleData),"particlesShown"in t&&o(21,I=t.particlesShown),"particlesPaused"in t&&o(22,z=t.particlesPaused),"particleLifetime"in t&&o(23,T=t.particleLifetime),"particleCount"in t&&o(24,D=t.particleCount),"particleDisplay"in t&&o(25,R=t.particleDisplay),"vectorData"in t&&o(26,M=t.vectorData),"vectorColors"in t&&o(27,j=t.vectorColors),"forwardProjectionFunction"in t&&o(4,B=t.forwardProjectionFunction),"inverseProjectionFunction"in t&&o(5,O=t.inverseProjectionFunction),"syncWithAnimationHook"in t&&o(28,k=t.syncWithAnimationHook),"canvasRatio"in t&&o(6,N=t.canvasRatio),"MAX_TEXTURE_SIZE"in t&&o(7,U=t.MAX_TEXTURE_SIZE)},t.$$.update=()=>{1610636288&t.$$.dirty[0]&&(a=!0),1&t.$$.dirty[1]&&o(4,B=t=>hi($,t)?null:$(t)),1&t.$$.dirty[1]&&o(5,O=t=>{let e=$.invert(t);return function(t,e,o){let r=t(o);return Math.round(e[0])===Math.round(r[0])&&Math.round(e[1])===Math.round(r[1])}($,t,e)?e:null}),16384&t.$$.dirty[0]&&o(33,r=P.id),3072&t.$$.dirty[0]|4&t.$$.dirty[1]&&o(32,f={u_lon0:g,u_lat0:v,u_projection:r}),32768&t.$$.dirty[0]&&(H.data=A),65536&t.$$.dirty[0]&&(H.colormap=C),131072&t.$$.dirty[0]&&(H.domain=w),262144&t.$$.dirty[0]&&(H.scale=F),524288&t.$$.dirty[0]&&(H.baseColor=E),67108864&t.$$.dirty[0]&&(H.vectorData=M),1048576&t.$$.dirty[0]&&(G.data=S),16777216&t.$$.dirty[0]&&(G.count=D),8388608&t.$$.dirty[0]&&(G.lifetime=T),68128768&t.$$.dirty[0]|2&t.$$.dirty[1]&&(p=!0),59772928&t.$$.dirty[0]|2&t.$$.dirty[1]&&(m=!0),2097152&t.$$.dirty[0]&&(I||(W=!0))},[l,s,c,u,B,O,N,U,di,pi,g,v,L,b,P,A,C,w,F,E,S,I,z,T,D,R,M,j,k,n,i,$,f,r,function(t){x[t?"unshift":"push"]((()=>{l=t,o(0,l)}))},function(t){x[t?"unshift":"push"]((()=>{s=t,o(1,s)}))},function(t){x[t?"unshift":"push"]((()=>{c=t,o(2,c)}))},function(t){x[t?"unshift":"push"]((()=>{u=t,o(3,u)}))}]}customElements.define("earth-map",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>:host{display:flex !important;width:300px;height:300px}div.layers{position:relative;flex:1}div.layers>:global(*){width:100%;height:100%;position:absolute}div.layers>*,::slotted(*){width:100%;height:100%;position:absolute}</style>",z(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},Fa,wa,i,{projections:8,dataProjections:9,centerLongitude:10,centerLatitude:11,zoom:12,portraitBasedZoom:13,projection:14,griddedData:15,griddedColormap:16,griddedDomain:17,griddedScale:18,griddedBaseColor:19,particleData:20,particlesShown:21,particlesPaused:22,particleLifetime:23,particleCount:24,particleDisplay:25,vectorData:26,vectorColors:27,forwardProjectionFunction:4,inverseProjectionFunction:5,syncWithAnimationHook:28,canvasRatio:6,MAX_TEXTURE_SIZE:7},[-1,-1]),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),F()))}static get observedAttributes(){return["projections","dataProjections","centerLongitude","centerLatitude","zoom","portraitBasedZoom","projection","griddedData","griddedColormap","griddedDomain","griddedScale","griddedBaseColor","particleData","particlesShown","particlesPaused","particleLifetime","particleCount","particleDisplay","vectorData","vectorColors","forwardProjectionFunction","inverseProjectionFunction","syncWithAnimationHook","canvasRatio","MAX_TEXTURE_SIZE"]}get projections(){return di}get dataProjections(){return pi}get centerLongitude(){return this.$$.ctx[10]}set centerLongitude(t){this.$set({centerLongitude:t}),F()}get centerLatitude(){return this.$$.ctx[11]}set centerLatitude(t){this.$set({centerLatitude:t}),F()}get zoom(){return this.$$.ctx[12]}set zoom(t){this.$set({zoom:t}),F()}get portraitBasedZoom(){return this.$$.ctx[13]}set portraitBasedZoom(t){this.$set({portraitBasedZoom:t}),F()}get projection(){return this.$$.ctx[14]}set projection(t){this.$set({projection:t}),F()}get griddedData(){return this.$$.ctx[15]}set griddedData(t){this.$set({griddedData:t}),F()}get griddedColormap(){return this.$$.ctx[16]}set griddedColormap(t){this.$set({griddedColormap:t}),F()}get griddedDomain(){return this.$$.ctx[17]}set griddedDomain(t){this.$set({griddedDomain:t}),F()}get griddedScale(){return this.$$.ctx[18]}set griddedScale(t){this.$set({griddedScale:t}),F()}get griddedBaseColor(){return this.$$.ctx[19]}set griddedBaseColor(t){this.$set({griddedBaseColor:t}),F()}get particleData(){return this.$$.ctx[20]}set particleData(t){this.$set({particleData:t}),F()}get particlesShown(){return this.$$.ctx[21]}set particlesShown(t){this.$set({particlesShown:t}),F()}get particlesPaused(){return this.$$.ctx[22]}set particlesPaused(t){this.$set({particlesPaused:t}),F()}get particleLifetime(){return this.$$.ctx[23]}set particleLifetime(t){this.$set({particleLifetime:t}),F()}get particleCount(){return this.$$.ctx[24]}set particleCount(t){this.$set({particleCount:t}),F()}get particleDisplay(){return this.$$.ctx[25]}set particleDisplay(t){this.$set({particleDisplay:t}),F()}get vectorData(){return this.$$.ctx[26]}set vectorData(t){this.$set({vectorData:t}),F()}get vectorColors(){return this.$$.ctx[27]}set vectorColors(t){this.$set({vectorColors:t}),F()}get forwardProjectionFunction(){return this.$$.ctx[4]}set forwardProjectionFunction(t){this.$set({forwardProjectionFunction:t}),F()}get inverseProjectionFunction(){return this.$$.ctx[5]}set inverseProjectionFunction(t){this.$set({inverseProjectionFunction:t}),F()}get syncWithAnimationHook(){return this.$$.ctx[28]}set syncWithAnimationHook(t){this.$set({syncWithAnimationHook:t}),F()}get canvasRatio(){return this.$$.ctx[6]}set canvasRatio(t){this.$set({canvasRatio:t}),F()}get MAX_TEXTURE_SIZE(){return this.$$.ctx[7]}set MAX_TEXTURE_SIZE(t){this.$set({MAX_TEXTURE_SIZE:t}),F()}})}();
